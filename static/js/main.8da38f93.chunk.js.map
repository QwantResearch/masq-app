{"version":3,"sources":["library/promiseHyperdb.js","modals/Signup/Signup.module.scss","containers/Sidebar/Sidebar.module.scss","serviceWorker.js","reducers/masq.js","reducers/index.js","actions/index.js","assets/logo.svg","assets/background.svg","assets/plus-square.svg","assets/camera-square.svg","components/Avatar/Avatar.jsx","assets/close.svg","components/Modal/Modal.jsx","modals/Signup/Signup.jsx","modals/AuthApp/AuthApp.jsx","containers/Login/Login.jsx","containers/Apps/Apps.jsx","assets/cards.svg","assets/phone.svg","assets/settings.svg","assets/logout.svg","containers/Sidebar/Sidebar.jsx","containers/Settings/Settings.jsx","App.jsx","containers/Devices/Devices.jsx","index.js","containers/Login/Login.module.scss","modals/AuthApp/AuthApp.module.scss","containers/Settings/Settings.module.scss","containers/Apps/Apps.module.scss","containers/Devices/Devices.module.scss","library/masq.js"],"names":["module","exports","get","db","path","Promise","resolve","reject","err","node","batch","put","obj","Signup","title","user","buttons","TextField","header","nav","navElement","active","logout","Boolean","window","location","hostname","match","masq","state","arguments","length","undefined","users","apps","devices","currentUser","action","type","Object","objectSpread","toConsumableArray","concat","currentAppRequest","app","device","combineReducers","Masq","init","signin","fetchApps","profileId","dispatch","getApps","then","receiveApps","createApp","channel","challenge","_extends","assign","target","i","source","key","prototype","hasOwnProperty","call","apply","this","logo_ref","react_default","a","createElement","fill","fillRule","fillOpacity","d","logo_SvgComponent","props","width","height","viewBox","__webpack_require__","p","background_extends","background_ref","background_ref2","_ref3","_ref4","background_SvgComponent","id","preserveAspectRatio","plus_square_extends","plus_square_ref","rx","plus_square_ref2","opacity","xlinkHref","x","y","stroke","strokeWidth","plus_square_SvgComponent","xmlnsXlink","camera_square_extends","camera_square_ref","camera_square_SvgComponent","Replace","_ref","size","image","onClick","main","upload","src","NewUpload","_ref2","style","className","color","Avatar","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","openDialog","bind","assertThisInitialized","refs","fileDialog","click","_this$props","firstname","lastname","onChange","backgroundImage","name","ref","display","accept","Avatar_Replace","Avatar_NewUpload","backgroundColor","position","toUpperCase","React","Component","close_extends","defaultProps","close_ref","close_ref2","close_SvgComponent","Modal","onClose","children","modalStyle","username","password","passwordConfirmation","currentStep","validationEnabled","refAvatar","createRef","next","finish","isValid","previous","handleKeyUp","fieldName","field","event","value","trim","setState","defineProperty","_this2","reader","FileReader","file","files","addEventListener","result","readAsDataURL","current","_this3","every","forceUpdate","onSignup","e","_this4","Modal_Modal","styles","Fragment","Avatar_Avatar_Avatar","onImageChange","paddingTop","secondary","label","paddingBottom","defaultValue","error","onKeyUp","autoFocus","AuthApp","handleAccept","appName","params","setCurrentAppRequest","appTitle","description","colorShadow","connect","Login","isSignupModalOpened","isLoggedIn","handleSignup","handleClickNewUser","fetchUsers","signup","Redirect","to","Logo","map","handleSignIn","PlusSquare","Background","modals_Signup_Signup","addProfile","addUser","getProfiles","receiveUsers","Apps","index","Card","minHeight","cards_extends","cards_ref","transform","cards_SvgComponent","phone_extends","phone_ref","phone_SvgComponent","settings_extends","settings_ref","settings_SvgComponent","logout_extends","logout_ref","logout_SvgComponent","signout","objectWithoutProperties","NavLink","activeClassName","Link","Settings","hasChanged","validate","keys","updateUser","titleContainer","profile","inputs","sidebar","updateProfile","authenticatedRoutes","Sidebar","Devices","App","dbMasqPrivate","dbMasqPublic","dbs","sw","messages","hash","handleInput","_require$detect","require","detect","os","addDevice","url","URL","href","searchParams","syncProfiles","msg","input","HashRouter","Route","exact","component","route","console","log","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","rootReducer","applyMiddleware","thunkMiddleware","render","react_redux_es","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister","fields","TextInput","button-container","parameters","appSettings","exportButton","HUB_URLS","openOrCreateDB","hyperdb","rai","valueEncoding","firstNode","replicateDB","discoveryKey","toString","hub","signalhub","swarm","on","peer","stream","replicate","live","pump","dbReady","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","core","profiles","values","forEach","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","mark","_callee","wrap","_context","prev","sent","dbName","stop","_x","promiseHyperdb","ids","uuidv4","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","profilePromises","all","profileNodes","n","Error","_createResource","_getResources","_updateResource","close","data","send","JSON","stringify","_callee10","_context10","find","abrupt","_callee9","_context9","_callee8","json","_context8","parse","addApp","authorize","Buffer","from","_x11","_x10","_x8","_x9","res","resourcePromises","_this5","resourceNodes","resources"],"mappings":"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","file":"static/js/main.8da38f93.chunk.js","sourcesContent":["module.exports = {\n  get,\n  batch,\n  put\n}\n\nfunction get (db, path) {\n  return new Promise((resolve, reject) => {\n    db.get(path, (err, node) => {\n      if (err) return reject(err)\n      return resolve(node)\n    })\n  })\n}\n\nfunction batch (db, batch) {\n  return new Promise((resolve, reject) => {\n    db.batch(batch, (err) => {\n      if (err) return reject(err)\n      return resolve()\n    })\n  })\n}\n\nfunction put (db, path, obj) {\n  return new Promise((resolve, reject) => {\n    db.put(path, obj, (err) => {\n      if (err) return reject(err)\n      return resolve()\n    })\n  })\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Signup\":\"Signup_Signup__2YyBN\",\"title\":\"Signup_title__iRIvM\",\"user\":\"Signup_user__1BFZq\",\"buttons\":\"Signup_buttons__2IjiQ\",\"TextField\":\"Signup_TextField__33SKF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Sidebar_header__K-cJy\",\"nav\":\"Sidebar_nav__3f7iE\",\"navElement\":\"Sidebar_navElement__3kiOF\",\"active\":\"Sidebar_active__2gOBr\",\"logout\":\"Sidebar_logout__3KfCS\"};","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          )\n        })\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.')\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  window.fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","const masq = (state = {\n  users: [],\n  apps: [],\n  devices: [],\n  currentUser: null\n}, action) => {\n  switch (action.type) {\n    case 'ADD_USER':\n      return {\n        ...state,\n        users: [...state.users, action.user]\n      }\n    case 'SIGNIN':\n      return {\n        ...state,\n        currentUser: action.user\n      }\n    case 'SIGNOUT':\n      return {\n        ...state,\n        currentUser: null\n      }\n    case 'RECEIVE_USERS':\n      return {\n        ...state,\n        users: action.users\n      }\n    case 'RECEIVE_APPS':\n      return {\n        ...state,\n        apps: action.apps\n      }\n    case 'SET_CURRENT_APP_REQUEST':\n      return {\n        ...state,\n        currentAppRequest: action.app\n      }\n    case 'ADD_APP':\n      return {\n        ...state,\n        apps: [...state.apps, action.app]\n      }\n    case 'ADD_DEVICE':\n      return {\n        ...state,\n        devices: [...state.devices, action.device]\n      }\n    default:\n      return state\n  }\n}\n\nexport default masq\n","import { combineReducers } from 'redux'\nimport masq from './masq'\n\nexport default combineReducers({\n  masq\n})\n","import { Masq } from '../library'\n\nconst masq = new Masq()\nmasq.init()\n\nconst addUser = user => ({\n  type: 'ADD_USER',\n  user\n})\n\nconst receiveUsers = users => ({\n  type: 'RECEIVE_USERS',\n  users\n})\n\nconst receiveApps = apps => ({\n  type: 'RECEIVE_APPS',\n  apps\n})\n\nexport const signin = user => ({\n  type: 'SIGNIN',\n  user\n})\n\nexport const signout = () => ({\n  type: 'SIGNOUT'\n})\n\nexport const updateUser = (id, user) => {\n  user.id = id\n  return function (dispatch) {\n    return masq.updateProfile(user)\n      .then(() => dispatch(signin(user)))\n  }\n}\n\nexport const signup = user => {\n  return function (dispatch) {\n    return masq.addProfile(user)\n      .then(() => dispatch(addUser(user)))\n  }\n}\n\nexport const fetchUsers = () => {\n  return function (dispatch) {\n    return masq.getProfiles()\n      .then(users => dispatch(receiveUsers(users)))\n  }\n}\n\nexport const addDevice = device => ({\n  type: 'ADD_DEVICE',\n  device\n})\n\nexport const fetchApps = (profileId) => {\n  return function (dispatch) {\n    return masq.getApps(profileId)\n      .then(apps => dispatch(receiveApps(apps)))\n  }\n}\n\nexport const setCurrentAppRequest = app => {\n  return {\n    type: 'SET_CURRENT_APP_REQUEST',\n    app\n  }\n}\n\nexport const createApp = (channel, challenge, app, profileId) => {\n  return function (dispatch) {\n    return masq.createApp(channel, challenge, app, profileId)\n      .then(() => dispatch(fetchApps(profileId)))\n  }\n}\n\nexport const syncProfiles = (channel, challenge) => {\n  return function (dispatch) {\n    return masq.syncProfiles(channel, challenge, () => {\n      console.log('okok sync')\n    })\n  }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#FFF\",\n  fillRule: \"nonzero\"\n}, React.createElement(\"g\", {\n  fillOpacity: .5\n}, React.createElement(\"path\", {\n  d: \"M78.899 29.426l-.056-.487c0-.046-.045-.08-.09-.08h-.023c-.01 0-.01.012-.022.012a1.103 1.103 0 0 1-.393.068c-.158 0-.27-.046-.338-.125-.067-.09-.1-.227-.1-.43v-1.066h.808a.077.077 0 0 0 .079-.08v-.476c0-.045-.045-.08-.09-.08h-.809V25.993c0-.046-.045-.08-.09-.08h-.607c-.045 0-.078.034-.09.08v.69h-.472a.089.089 0 0 0-.09.092v.476c0 .045.034.079.068.09h.483v1.202c0 .374.09.657.259.839.168.181.438.272.786.272.146 0 .292-.012.427-.046.101-.022.203-.056.27-.09.067-.023.09-.046.09-.091 0 .011 0 .011 0 0zM65.155 28.769c-.01-.023-.022-.046-.033-.068-.012-.057.033-.114.067-.16.034-.045.056-.101.09-.158.056-.102.101-.215.135-.329.078-.238.1-.487.1-.736a2.605 2.605 0 0 0-.145-.782 1.98 1.98 0 0 0-.382-.624 2.048 2.048 0 0 0-.506-.43 1.98 1.98 0 0 0-.663-.261c-.247-.057-.506-.068-.753-.057-.258.023-.506.08-.742.193-.236.102-.449.249-.629.43a2.44 2.44 0 0 0-.45.624c-.112.238-.18.487-.202.748-.022.26-.01.521.045.77.057.25.158.488.293.704.134.215.303.396.494.544.191.147.416.26.64.34.124.045.259.068.394.09.123.023.247.034.37.023.124 0 .237-.011.36-.034.068-.011.135-.023.191-.034.056-.011.113-.023.135-.08.023-.045-.011-.09-.034-.135-.022-.057-.056-.102-.078-.16-.045-.101-.101-.192-.146-.294a.115.115 0 0 0-.068-.056c-.022-.012-.056 0-.078 0-.034.01-.068.01-.102.01-.134.024-.27.024-.404 0a1.466 1.466 0 0 1-.697-.294 1.557 1.557 0 0 1-.46-.59 1.563 1.563 0 0 1-.113-.747c.034-.25.124-.5.27-.703a1.5 1.5 0 0 1 .562-.465 1.441 1.441 0 0 1 1.404.09c.18.114.326.273.45.454a1.528 1.528 0 0 1 .112 1.383 1.57 1.57 0 0 1-.37.521c-.023.023-.046.035-.057.069a.098.098 0 0 0 0 .079l.416.839c.022.045.045.102.09.136.034.022.067.011.101.011h.64c.08 0 .135-.08.09-.159-.044-.079-.078-.158-.123-.226l-.214-.476zM68.931 28.644l.506-1.916a.085.085 0 0 1 .079-.056h.618c.045 0 .09.034.09.09v.023l-.9 2.709c-.01.034-.044.045-.078.045h-.585a.085.085 0 0 1-.078-.056l-.63-1.848-.606 1.848a.094.094 0 0 1-.079.045h-.573a.085.085 0 0 1-.079-.057l-.899-2.731c0-.046.034-.091.09-.091h.64c.034 0 .057.023.068.045l.506 1.927.584-1.915a.085.085 0 0 1 .079-.057h.528c.034 0 .067.023.079.045l.64 1.95zM72.471 27.034a.93.93 0 0 0-.382-.34 1.17 1.17 0 0 0-.528-.124c-.259 0-.495.068-.708.215-.214.136-.371.329-.483.555a1.724 1.724 0 0 0-.169.771v.057c.011.272.067.521.169.737.112.226.27.408.472.532.202.125.427.182.674.182.18 0 .337-.023.472-.08 0 0 .303-.102.472-.374l.011.295c.011.045.045.08.09.08h.573c.045 0 .09-.035.09-.091V26.75a.089.089 0 0 0-.09-.09h-.573a.098.098 0 0 0-.09.067v.306zm-.169.499c.135.147.191.34.191.578 0 .25-.067.442-.213.6a.694.694 0 0 1-.54.228.7.7 0 0 1-.539-.227.844.844 0 0 1-.213-.533s-.045-.374.213-.657c.135-.159.326-.227.55-.227-.01-.023.327-.045.551.238zM74.483 26.74c-.012-.046-.045-.08-.09-.08h-.585a.089.089 0 0 0-.09.09v2.699c0 .045.034.09.09.09h.607a.085.085 0 0 0 .079-.056v-1.485c0-.227.056-.408.157-.533a.535.535 0 0 1 .438-.193c.337 0 .506.227.506.67v1.54a.085.085 0 0 0 .079.057h.607c.044 0 .09-.034.09-.09v-1.655c0-.397-.09-.703-.27-.907-.18-.204-.439-.317-.776-.317-.202 0-.37.034-.517.113a.973.973 0 0 0-.348.329l.023-.272z\"\n})), React.createElement(\"path\", {\n  d: \"M21.497 8.887C20.587 7.833 19.25 7.3 17.52 7.3c-1.011 0-1.944.238-2.787.725-.854.476-1.472 1.122-1.876 1.905-.854-1.757-2.349-2.63-4.462-2.63-1.01 0-1.899.193-2.652.578a4.317 4.317 0 0 0-1.786 1.7l-.023-1.235a.574.574 0 0 0-.55-.578H.663a.578.578 0 0 0-.573.578v13.534c0 .317.258.578.573.578h2.82c.315 0 .574-.26.574-.578v-7.368c0-1.134.258-2.029.753-2.686.505-.658 1.202-.987 2.101-.987.9 0 1.55.284 1.955.84.405.555.618 1.427.618 2.595v7.594c0 .318.259.579.574.579h2.831c.315 0 .562-.25.574-.556v-7.356c0-1.157.247-2.063.753-2.71.505-.657 1.202-.986 2.078-.986.877 0 1.529.284 1.945.84.415.555.629 1.427.629 2.595v7.628c.022.307.27.545.573.545h2.832c.314 0 .573-.261.573-.579v-8.342c.022-2.03-.438-3.582-1.349-4.636zM39.938 7.753H37.23a.566.566 0 0 0-.55.578l-.046 1.327a4.816 4.816 0 0 0-1.932-1.746c-.81-.42-1.72-.624-2.709-.624-1.337 0-2.54.363-3.607 1.077a7.22 7.22 0 0 0-2.472 2.857c-.585 1.19-.877 2.493-.877 3.91 0 1.542.292 2.902.888 4.081.596 1.179 1.393 2.097 2.416 2.732 1.023.635 2.169.952 3.45.952 1.09 0 2.045-.193 2.866-.59a4.769 4.769 0 0 0 1.977-1.745l.045 1.292c0 .317.259.578.573.578h2.675c.315 0 .573-.26.573-.578V8.331a.583.583 0 0 0-.562-.578zm-4.281 10.395c-.73.793-1.652 1.19-2.776 1.19-1.124 0-2.056-.397-2.776-1.19-.73-.794-1.09-1.814-1.09-3.061 0-1.235.36-2.244 1.068-3.038.72-.793 1.64-1.179 2.787-1.179 1.146 0 2.079.397 2.787 1.18.719.793 1.067 1.802 1.067 3.037.023 1.258-.337 2.278-1.067 3.06zM48.153 22.92a12.28 12.28 0 0 1-3.147-.386c-.797-.204-1.45-.476-1.955-.782a.633.633 0 0 1-.28-.623l.291-1.95a.63.63 0 0 1 .91-.465c.461.238.956.442 1.506.612a8.379 8.379 0 0 0 2.506.408c1.619 0 2.439-.419 2.439-1.246 0-.442-.169-.783-.517-1.01-.348-.226-1.056-.498-2.146-.804-1.72-.476-2.945-1.088-3.675-1.836-.73-.737-1.101-1.735-1.101-2.993 0-1.405.528-2.516 1.573-3.321 1.045-.805 2.495-1.213 4.326-1.213.9 0 1.798.102 2.686.318.697.17 1.304.374 1.798.612a.617.617 0 0 1 .337.657l-.27 1.87a.623.623 0 0 1-.865.488 8.393 8.393 0 0 0-1.303-.442 8.726 8.726 0 0 0-2.214-.306c-1.394 0-2.09.374-2.09 1.122 0 .42.168.76.505.997.338.238 1 .51 1.99.794 1.831.544 3.124 1.179 3.876 1.904.753.737 1.135 1.746 1.135 3.027 0 1.428-.561 2.539-1.674 3.355-1.135.805-2.675 1.213-4.641 1.213zM56.289 27.828a.826.826 0 0 1 .652-.318c.157 0 .292.034.438.114.18.102.326.25.404.43.068.16.113.318.113.5 0 .34-.113.6-.326.804a.895.895 0 0 1-.64.25.775.775 0 0 1-.641-.318v.102a.328.328 0 0 1-.023.136c-.022.023-.056.023-.134.023h-.236c-.068 0-.113-.012-.124-.023-.022-.023-.022-.057-.022-.136v-3.095c0-.068.01-.113.022-.136.022-.022.056-.022.124-.022h.236a.32.32 0 0 1 .134.022c.023.023.023.057.023.136v1.53zm.483.181a.533.533 0 0 0-.382.159.516.516 0 0 0-.157.385.542.542 0 0 0 .54.544c.145 0 .28-.056.381-.158a.524.524 0 0 0 .158-.397.562.562 0 0 0-.158-.386.506.506 0 0 0-.382-.147zM58.862 29.245l-.809-1.474a.562.562 0 0 1-.045-.102c0-.034.011-.057.034-.068a.298.298 0 0 1 .124-.023h.292c.056 0 .1 0 .112.012a.423.423 0 0 1 .068.09l.528 1.02.505-1.008c.023-.057.045-.091.057-.091.01-.011.056-.011.112-.011h.28c.057 0 .09 0 .113.011.034.011.045.045.045.08 0 .022-.011.056-.045.101l-1.416 2.732c-.022.057-.045.08-.067.09-.011.012-.056.012-.112.012h-.281c-.057 0-.09 0-.113-.011-.033-.012-.045-.046-.045-.08 0-.022.012-.056.045-.102l.618-1.178z\"\n}), React.createElement(\"path\", {\n  fillOpacity: .5,\n  d: \"M76.944 18.533c-.057-.113-.135-.227-.158-.351-.056-.295.191-.556.337-.794a11.732 11.732 0 0 0 1.135-2.494 11.92 11.92 0 0 0 .517-3.774c-.033-1.372-.28-2.743-.775-4.013A11.333 11.333 0 0 0 76.067 3.9a10.682 10.682 0 0 0-2.618-2.21 11.403 11.403 0 0 0-3.383-1.36A13.01 13.01 0 0 0 66.2.068c-1.314.102-2.618.42-3.82.963a11.504 11.504 0 0 0-3.237 2.21 11.196 11.196 0 0 0-2.292 3.209 11.64 11.64 0 0 0-1.057 3.831 12.794 12.794 0 0 0 .236 3.979c.281 1.27.787 2.493 1.484 3.593a10.734 10.734 0 0 0 2.55 2.788c.99.76 2.113 1.338 3.293 1.723.652.216 1.315.363 1.99.465.629.09 1.292.147 1.932.125a17.049 17.049 0 0 0 1.854-.16c.338-.056.675-.112 1-.203.282-.068.585-.125.697-.43.09-.25-.033-.454-.146-.67l-.404-.816-.742-1.496a.559.559 0 0 0-.326-.295c-.146-.045-.27-.011-.416.023a6.394 6.394 0 0 1-.494.09 7.722 7.722 0 0 1-2.045.012 7.49 7.49 0 0 1-3.551-1.485 7.525 7.525 0 0 1-2.338-3.026 7.554 7.554 0 0 1-.55-3.854 7.473 7.473 0 0 1 1.393-3.57 7.441 7.441 0 0 1 2.854-2.37 7.41 7.41 0 0 1 3.855-.691 7.407 7.407 0 0 1 3.36 1.156 7.647 7.647 0 0 1 2.281 2.3 7.725 7.725 0 0 1 1.169 3.64 7.514 7.514 0 0 1-.596 3.4 7.55 7.55 0 0 1-1.921 2.675c-.113.102-.236.193-.281.351a.54.54 0 0 0 .022.397l2.146 4.274c.113.215.214.544.439.68.157.09.36.068.528.068h3.281c.394-.012.674-.431.483-.794-.202-.397-.415-.793-.618-1.179l-1.27-2.448z\"\n}));\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 79,\n    height: 31,\n    viewBox: \"0 0 79 31\"\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/logo.c061ba54.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M10.2 41.8c2 3.5 4.2 6.9 6.6 10.1H0v-3.5c3.3-2.3 6.7-4.5 10.2-6.6zM206.1 40.5c-4.6 3.4-8.8 7.2-12.6 11.4h-22.3c5.1-6.9 9.3-14.5 12.5-22.6 7.7 3.3 15.2 7 22.4 11.2z\",\n  fill: \"#3394D2\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M183.7 29.3c-3.2 8.1-7.4 15.7-12.5 22.6H16.7c-2.4-3.2-4.6-6.6-6.6-10.1C36.5 26 66.8 16.3 99.4 14.6a163.613 163.613 0 0 1 19.8 0c22.7 1.2 44.5 6.3 64.5 14.7z\",\n  fill: \"#4ebbc2\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M206.1 40.5c13-9.6 28.8-15.6 45.9-16.4v27.8h-28.6c-.3-.3-.7-.5-1-.8-.3-.2-.6-.5-.9-.7-.1 0-.1-.1-.2-.1-.3-.2-.6-.5-1-.7l-.9-.6c-.1-.1-.2-.2-.3-.2-.2-.2-.5-.3-.7-.5l-.9-.6c-.2-.1-.4-.3-.6-.4-.2-.2-.5-.3-.7-.5l-.9-.6-.9-.6s-.1-.1-.2-.1c-.4-.2-.7-.5-1.1-.7-.4-.2-.8-.5-1.1-.7s-.8-.5-1.2-.7c-.3-.2-.5-.3-.8-.5-1.4-.9-2.6-1.6-3.9-2.4z\",\n  fill: \"#e53b5b\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M223.4 51.9h-29.9c3.8-4.2 8-8 12.6-11.4 1.3.8 2.6 1.5 3.8 2.3.3.2.5.3.8.5.4.2.8.5 1.2.7s.8.5 1.1.7c.4.2.7.5 1.1.7.1 0 .1.1.2.1l.9.6.9.6c.3.2.5.3.7.5.2.1.4.3.6.4l.9.6c.2.2.5.3.7.5.1.1.2.2.3.2l.9.6c.3.2.7.5 1 .7.1 0 .1.1.2.1.3.2.6.5.9.7.4.4.7.6 1.1.9z\",\n  fill: \"#6f559f\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    id: \"Calque_1\",\n    preserveAspectRatio: \"none\",\n    viewBox: \"0 0 252 52\"\n  }, props), _ref, _ref2, _ref3, _ref4);\n};\n\nexport default __webpack_public_path__ + \"static/media/background.0b1d9619.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"rect\", {\n  id: \"a\",\n  width: 120,\n  height: 120,\n  rx: 10\n}), React.createElement(\"path\", {\n  id: \"b\",\n  d: \"M78.667 60c0 1.4-.934 2.333-2.334 2.333h-14v14c0 1.4-.933 2.334-2.333 2.334-1.4 0-2.333-.934-2.333-2.334v-14h-14c-1.4 0-2.334-.933-2.334-2.333 0-1.4.934-2.333 2.334-2.333h14v-14c0-1.4.933-2.334 2.333-2.334 1.4 0 2.333.934 2.333 2.334v14h14c1.4 0 2.334.933 2.334 2.333z\"\n}));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"g\", {\n  opacity: .5\n}, React.createElement(\"use\", {\n  fill: \"#1F2330\",\n  xlinkHref: \"#a\"\n}), React.createElement(\"rect\", {\n  width: 118,\n  height: 118,\n  x: 1,\n  y: 1,\n  stroke: \"#FFF\",\n  strokeWidth: 2,\n  rx: 10\n})), React.createElement(\"use\", {\n  fill: \"#FFF\",\n  fillRule: \"nonzero\",\n  opacity: .5,\n  xlinkHref: \"#b\"\n}));\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 120,\n    height: 120,\n    viewBox: \"0 0 120 120\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/plus-square.e518f822.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"rect\", {\n  height: 118,\n  opacity: .5,\n  rx: 10,\n  stroke: \"#999\",\n  strokeWidth: 2,\n  width: 118,\n  x: 1,\n  y: 1\n}), React.createElement(\"path\", {\n  d: \"m77.2 46.6h-6.5333333l-3.1733334-4.8533333c-.3733333-.3733334-.9333333-.7466667-1.4933333-.7466667h-11.2c-.56 0-1.12.3733333-1.4933333.7466667l-3.1733334 4.8533333h-6.5333333c-3.1733333 0-5.6 2.4266667-5.6 5.6v20.5333333c0 3.1733334 2.4266667 5.6 5.6 5.6h33.6c3.1733333 0 5.6-2.4266666 5.6-5.6v-20.5333333c0-3.1733333-2.4266667-5.6-5.6-5.6zm1.8666667 26.1333333c0 1.12-.7466667 1.8666667-1.8666667 1.8666667h-33.6c-1.12 0-1.8666667-.7466667-1.8666667-1.8666667v-20.5333333c0-1.12.7466667-1.8666667 1.8666667-1.8666667h7.4666667c.56 0 1.12-.3733333 1.4933333-.7466666l3.1733333-4.8533334h9.1466667l3.1733333 4.8533334c.56.3733333 1.12.7466666 1.68.7466666h7.4666667c1.12 0 1.8666667.7466667 1.8666667 1.8666667zm-18.6666667-20.5333333c-5.2266667 0-9.3333333 4.1066667-9.3333333 9.3333333 0 5.2266667 4.1066666 9.3333334 9.3333333 9.3333334s9.3333333-4.1066667 9.3333333-9.3333334c0-5.2266666-4.1066666-9.3333333-9.3333333-9.3333333zm0 14.9333333c-3.1733333 0-5.6-2.4266666-5.6-5.6 0-3.1733333 2.4266667-5.6 5.6-5.6s5.6 2.4266667 5.6 5.6c0 3.1733334-2.4266667 5.6-5.6 5.6z\",\n  fill: \"#ccc\",\n  fillRule: \"nonzero\"\n}));\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 120,\n    viewBox: \"0 0 120 120\",\n    width: 120\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/camera-square.75a605b6.svg\";\nexport { SvgComponent as ReactComponent };","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Avatar as AvatarBase } from 'qwant-research-components'\n\nimport { ReactComponent as CameraSquare } from '../../assets/camera-square.svg'\n\nimport './Avatar.css'\n\nconst Replace = ({ size, image, onClick }) =>\n  <AvatarBase upload src={image} width={size} height={size} onClick={onClick} />\n\nReplace.propTypes = {\n  size: PropTypes.number,\n  image: PropTypes.string.isRequired,\n  onClick: PropTypes.func\n}\n\nconst NewUpload = ({ style, onClick }) => (\n  <CameraSquare\n    className='Avatar upload'\n    color='var(--grey-200)'\n    style={style}\n    onClick={onClick}\n  />\n)\n\nNewUpload.propTypes = {\n  style: PropTypes.object,\n  onClick: PropTypes.func\n}\n\nexport default class Avatar extends React.Component {\n  constructor (props) {\n    super(props)\n    this.openDialog = this.openDialog.bind(this)\n  }\n\n  openDialog () {\n    this.refs.fileDialog.click()\n  }\n\n  render () {\n    const { size, image, firstname, lastname, upload, onChange } = this.props\n    const style = { backgroundImage: 'url(' + image + ')' }\n\n    if (upload) {\n      return (\n        <div>\n          <input name='avatar' type='file' ref='fileDialog'\n            style={{ display: 'none' }} onChange={onChange}\n            accept='.jpg, .jpeg, .png'\n          />\n\n          {image\n            ? <Replace size={size} image={image} onClick={this.openDialog} />\n            : <NewUpload style={style} onClick={this.openDialog} />\n          }\n        </div>)\n    }\n\n    return image\n      ? <AvatarBase src={image} width={size} height={size} />\n      : (\n        <div className='Avatar initials' style={{ backgroundColor: '#458bf8', position: 'relative', width: size, height: size }}>\n          <p>{firstname[0].toUpperCase() + lastname[0].toUpperCase()}</p>\n        </div>\n      )\n  }\n}\n\nAvatar.defaultProps = {\n  size: 120\n}\n\nAvatar.propTypes = {\n  size: PropTypes.number,\n  firstname: PropTypes.string,\n  lastname: PropTypes.string,\n  upload: PropTypes.bool,\n  image: PropTypes.string,\n  onChange: PropTypes.func\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"path\", {\n  id: \"close-svg\",\n  d: \"M13.7 12.3c.4.4.4 1 0 1.4-.2.2-.4.3-.7.3-.3 0-.5-.1-.7-.3L7 8.4l-5.3 5.3c-.2.2-.4.3-.7.3-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4L5.6 7 .3 1.7C-.1 1.3-.1.7.3.3c.4-.4 1-.4 1.4 0L7 5.6 12.3.3c.4-.4 1-.4 1.4 0 .4.4.4 1 0 1.4L8.4 7l5.3 5.3z\"\n}));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"use\", {\n  fill: \"currentColor\",\n  fillRule: \"nonzero\",\n  xlinkHref: \"#close-svg\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 14,\n    viewBox: \"0 0 14 14\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/close.56b2bac8.svg\";\nexport { SvgComponent as ReactComponent };","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { ReactComponent as Close } from '../../assets/close.svg'\n\nimport './Modal.scss'\n\nexport default function Modal ({ onClose, width, height, children }) {\n  const modalStyle = {\n    height: height,\n    width: width\n  }\n\n  return (\n    <div className='Modal'>\n      <div className='overlay' onClick={onClose} />\n      <div className='modal' style={modalStyle}>\n        {onClose && <Close className='close' width={9} height={9} onClick={onClose} />}\n        {children}\n      </div>\n    </div>\n  )\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  children: PropTypes.object\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, TextField } from 'qwant-research-components'\n\nimport { Avatar, Modal } from '../../components'\n\nimport styles from './Signup.module.scss'\n\nclass Signup extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      image: '',\n      lastname: '',\n      firstname: '',\n      username: '',\n      password: '',\n      passwordConfirmation: ''\n    }\n\n    this.currentStep = 0\n    this.validationEnabled = false\n    this.refAvatar = React.createRef()\n\n    this.next = this.next.bind(this)\n    this.finish = this.finish.bind(this)\n    this.isValid = this.isValid.bind(this)\n    this.previous = this.previous.bind(this)\n    this.openDialog = this.openDialog.bind(this)\n    this.handleKeyUp = this.handleKeyUp.bind(this)\n  }\n\n  isValid (fieldName) {\n    if (!this.validationEnabled) {\n      // Don't show error as long as the user does not click Finish btn\n      return true\n    }\n\n    if (fieldName === 'image') return true\n    if (fieldName === 'password') {\n      return this.state[fieldName].length >= 8\n    }\n    if (fieldName === 'passwordConfirmation') {\n      return this.state[fieldName] === this.state.password\n    }\n\n    return this.state[fieldName].length > 0\n  }\n\n  onChange (field, event) {\n    const value = event.target.value.trim()\n    this.setState({\n      [field]: value\n    })\n  }\n\n  onImageChange (event) {\n    const reader = new window.FileReader()\n    const file = event.target.files[0]\n    if (!file) {\n      return\n    }\n\n    reader.addEventListener('load', () => {\n      this.setState({ image: reader.result })\n    })\n    reader.readAsDataURL(file)\n  }\n\n  openDialog () {\n    this.refAvatar.current.openDialog()\n  }\n\n  next () {\n    const fieldsToValidate = ['lastname', 'firstname', 'username']\n    this.validationEnabled = true\n\n    const isValid = fieldsToValidate.every(key => this.isValid(key))\n\n    // If invalid, return\n    if (!isValid) {\n      // forceUpdate to show errors\n      return this.forceUpdate()\n    }\n\n    this.validationEnabled = false // do not display error on the next step for now\n    this.currentStep++\n    this.forceUpdate()\n  }\n\n  previous () {\n    this.currentStep--\n    this.forceUpdate()\n  }\n\n  finish () {\n    const { onSignup } = this.props\n    this.validationEnabled = true\n\n    if (!this.isValid('password')) {\n      // forceUpdate to show errors\n      return this.forceUpdate()\n    }\n\n    onSignup(this.state)\n  }\n\n  handleKeyUp (e) {\n    if (e.key !== 'Enter') {\n      return\n    }\n\n    if (this.currentStep === 0) {\n      this.next()\n    } else {\n      this.finish()\n    }\n  }\n\n  render () {\n    return (\n      <Modal onClose={this.props.onClose} height={670} width={511}>\n        <div className={styles.Signup}>\n          <span className={styles.title}>Ajouter un nouvel utilisateur</span>\n\n          {this.currentStep === 0 && (\n            <React.Fragment>\n              <Avatar\n                size={120}\n                upload\n                ref={this.refAvatar}\n                onChange={(e) => this.onImageChange(e)}\n                image={this.state.image || null}\n              />\n\n              <div style={{ paddingTop: 24 }} />\n              <Button secondary label='Importer une photo' onClick={this.openDialog} />\n              <div style={{ paddingBottom: 32 }} />\n\n              <TextField\n                className={styles.TextField}\n                defaultValue={this.state.lastname}\n                label='Nom'\n                error={!this.isValid('lastname')}\n                onChange={(e) => this.onChange('lastname', e)}\n              />\n              <TextField\n                className={styles.TextField}\n                defaultValue={this.state.firstname}\n                label='Prnom'\n                error={!this.isValid('firstname')}\n                onChange={(e) => this.onChange('firstname', e)}\n              />\n              <TextField\n                className={styles.TextField}\n                defaultValue={this.state.username}\n                label='Pseudo (affich)'\n                error={!this.isValid('username')}\n                onChange={(e) => this.onChange('username', e)}\n                onKeyUp={this.handleKeyUp}\n              />\n\n              <div className={styles.buttons}>\n                <Button label='Suivant' onClick={this.next} width={185} />\n              </div>\n            </React.Fragment>\n          )}\n\n          {this.currentStep === 1 && (\n            <React.Fragment>\n              <Avatar\n                size={120}\n                image={this.state.image}\n                firstname={this.state.firstname}\n                lastname={this.state.lastname}\n              />\n              <p className={styles.user}>{this.state.username}</p>\n              <TextField\n                className={styles.TextField}\n                autoFocus\n                type='password'\n                label={this.isValid('password')\n                  ? 'Mot de passe'\n                  : 'Le mot de passe doit tre compos d\\'au moins 8 caractres.'}\n                error={!this.isValid('password')}\n                onChange={(e) => this.onChange('password', e)}\n              />\n\n              <TextField\n                className={styles.TextField}\n                type='password'\n                label={this.isValid('passwordConfirmation')\n                  ? 'Mot de passe (confirmation)'\n                  : 'Les mots de passe ne correspondent pas.'}\n                error={!this.isValid('passwordConfirmation')}\n                onKeyUp={this.handleKeyUp}\n                onChange={(e) => this.onChange('passwordConfirmation', e)}\n              />\n\n              <div className={styles.buttons}>\n                <Button label='Prcdent' onClick={this.previous} width={185} />\n                <Button label='Terminer' onClick={this.finish} width={185} />\n              </div>\n            </React.Fragment>\n          )}\n        </div>\n      </Modal>\n    )\n  }\n}\n\nSignup.propTypes = {\n  onSignup: PropTypes.func,\n  onClose: PropTypes.func\n}\n\nexport default Signup\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Button } from 'qwant-research-components'\n\nimport { Modal } from '../../components'\nimport { createApp, setCurrentAppRequest } from '../../actions'\n\nimport styles from './AuthApp.module.scss'\n\nclass AuthApp extends React.Component {\n  constructor (props) {\n    super(props)\n    this.handleAccept = this.handleAccept.bind(this)\n  }\n\n  componentDidMount () {\n    const appName = this.props.match.params.app\n    this.props.setCurrentAppRequest({ name: appName })\n  }\n\n  handleAccept () {\n    const channel = this.props.match.params.channel\n    this.props.createApp(this.props.match.params.app, channel)\n  }\n\n  render () {\n    const { app } = this.props\n\n    return (\n      <Modal width={511}>\n        <div className={styles.AuthApp}>\n          <p className={styles.title}>New connection request from</p>\n          <p className={styles.appTitle}>{app.name}</p>\n          <p className={styles.description}>\n            This notification appears because that application asks permission\n            to use your Masq storage. Please verify that the security code match with the one of the app.\n          </p>\n          <p className={styles.description}>\n            If you are not at the origin of this request or if you have question,\n            please contact our help center.\n          </p>\n\n          <div className={styles.buttons}>\n            <Button label={'Reject'} color={'var(--red-100)'} colorShadow={'var(--red-100-shadow)'} />\n            <Button label={'Accept'} onClick={this.handleAccept} color={'var(--green-100)'} colorShadow={'var(--green-100-shadow)'} />\n          </div>\n        </div>\n      </Modal>\n    )\n  }\n}\n\nAuthApp.defaultProps = {\n  app: { name: 'app test' }\n}\n\nAuthApp.propTypes = {\n  app: PropTypes.object.isRequired,\n  setCurrentAppRequest: PropTypes.func,\n  createApp: PropTypes.func,\n  match: PropTypes.object\n}\n\nconst mapStateToProps = state => ({\n  currentUser: state.masq.currentUser,\n  app: state.masq.currentAppRequest\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  createApp: (channel, challenge, app) => dispatch(createApp(channel, challenge, app)),\n  setCurrentAppRequest: (app) => dispatch(setCurrentAppRequest(app))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AuthApp)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { signin, signup, fetchUsers } from '../../actions'\nimport { Redirect } from 'react-router-dom'\n\nimport styles from './Login.module.scss'\nimport { ReactComponent as Logo } from '../../assets/logo.svg'\nimport { ReactComponent as Background } from '../../assets/background.svg'\nimport { ReactComponent as PlusSquare } from '../../assets/plus-square.svg'\nimport { Avatar } from '../../components'\n\nimport { Signup } from '../../modals'\n\nclass Login extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      isSignupModalOpened: false,\n      isLoggedIn: false\n    }\n\n    this.handleSignup = this.handleSignup.bind(this)\n    this.handleClickNewUser = this.handleClickNewUser.bind(this)\n  }\n\n  componentDidMount () {\n    this.props.fetchUsers()\n  }\n\n  handleClickNewUser () {\n    this.setState({\n      isSignupModalOpened: !this.state.isSignupModalOpened\n    })\n  }\n\n  handleClose () {\n    this.setState({ isSignupModalOpened: false })\n  }\n\n  handleSignIn (user) {\n    this.props.signin(user)\n    this.setState({ isLoggedIn: true })\n  }\n\n  handleSignup (user) {\n    const { signup } = this.props\n    signup(user)\n    this.setState({ isSignupModalOpened: false })\n  }\n\n  render () {\n    const { users, user } = this.props\n    const { isSignupModalOpened } = this.state\n\n    if (user) return <Redirect to='/apps' />\n\n    return (\n      <div className={styles.Login}>\n        <Logo className={styles.Logo} />\n        <h1 className={styles.title}>Qui est-ce ?</h1>\n        <div className={styles.users}>\n          {users.map(user => (\n            <div to='/apps' key={user.username} className={styles.user} onClick={() => this.handleSignIn(user)}>\n              <Avatar {...user} />\n              <h2>{user.username}</h2>\n            </div>\n          ))}\n          <PlusSquare className={styles.PlusSquare} onClick={this.handleClickNewUser} />\n        </div>\n        <Background className={styles.Background} />\n        {isSignupModalOpened && <Signup onSignup={this.handleSignup} onClose={this.handleClickNewUser} />}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  user: state.masq.currentUser,\n  users: state.masq.users\n})\n\nconst mapDispatchToProps = dispatch => ({\n  signin: user => dispatch(signin(user)),\n  signup: user => dispatch(signup(user)),\n  fetchUsers: user => dispatch(fetchUsers(user))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Card } from 'qwant-research-components'\n\nimport { fetchApps } from '../../actions'\n\nimport styles from './Apps.module.scss'\n\n// const Actions = () => (\n//   <div style={{ display: 'flex', alignItems: 'center' }}>\n//     {/* <Switch color='#a3005c' label='Enabled' checked /> */}\n//     <div style={{ marginRight: 16 }} />\n//     <BurgerMenu>\n//       <Icon name='Trash' fill='#b2b2b2' />\n//     </BurgerMenu>\n//   </div>\n// )\n\nclass Apps extends Component {\n  componentDidMount () {\n    const { user } = this.props\n    if (!user) return\n\n    this.props.fetchApps(user.id)\n  }\n\n  render () {\n    const { apps, user } = this.props\n\n    if (!user) return <Redirect to='/' />\n    if (!apps) return false\n\n    return (\n      <div className={styles.Apps}>\n        <p className='title'>Mes Applications</p>\n        <p className='subtitle'>Retrouvez vos applications synchronises avec Masq</p>\n        {apps.map((app, index) => (\n          <div key={index} className={styles.Card}>\n            <Card minHeight={64} title={app.name} image={app.image} color='#a3005c' description={app.description} />\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  user: state.masq.currentUser,\n  apps: state.masq.apps\n})\n\nconst mapDispatchToProps = dispatch => ({\n  fetchApps: (profileId) => dispatch(fetchApps(profileId))\n})\n\nApps.propTypes = {\n  apps: PropTypes.array,\n  user: PropTypes.object,\n  fetchApps: PropTypes.func\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Apps)\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m37.2 0h-6.3c-.54 0-.9.36-.9.9v6.3c0 .54.36.9.9.9h6.3c.54 0 .9-.36.9-.9v-6.3c0-.54-.36-.9-.9-.9zm-.9 6.3h-4.5v-4.5h4.5zm10.8-6.3h-6.3c-.54 0-.9.36-.9.9v6.3c0 .54.36.9.9.9h6.3c.54 0 .9-.36.9-.9v-6.3c0-.54-.36-.9-.9-.9zm-.9 6.3h-4.5v-4.5h4.5zm.9 3.6h-6.3c-.54 0-.9.36-.9.9v6.3c0 .54.36.9.9.9h6.3c.54 0 .9-.36.9-.9v-6.3c0-.54-.36-.9-.9-.9zm-.9 6.3h-4.5v-4.5h4.5zm-9-6.3h-6.3c-.54 0-.9.36-.9.9v6.3c0 .54.36.9.9.9h6.3c.54 0 .9-.36.9-.9v-6.3c0-.54-.36-.9-.9-.9zm-.9 6.3h-4.5v-4.5h4.5z\",\n  transform: \"translate(-30)\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 18,\n    viewBox: \"0 0 18 18\",\n    width: 18\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/cards.ff3aa3d8.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m13 0h-10c-1.7 0-3 1.3-3 3v16c0 1.7 1.3 3 3 3h10c1.7 0 3-1.3 3-3v-16c0-1.7-1.3-3-3-3zm1 19c0 .6-.4 1-1 1h-10c-.6 0-1-.4-1-1v-16c0-.6.4-1 1-1h10c.6 0 1 .4 1 1zm-6-1c1.1045695 0 2-.8954305 2-2s-.8954305-2-2-2-2 .8954305-2 2 .8954305 2 2 2z\",\n  transform: \"\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 22,\n    viewBox: \"0 0 16 22\",\n    width: 16\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/phone.e486939a.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m12 8c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm8.3 1.4c.1-.2.3-.4.7-.4 1.7 0 3-1.3 3-3s-1.3-3-3-3h-.2c-.2 0-.4-.1-.5-.3 0-.1 0-.1-.1-.2-.1-.2-.1-.5.2-.8 1.2-1.2 1.2-3.1 0-4.2-.6-.6-1.3-.9-2.1-.9s-1.6.3-2.2.9c-.2.2-.5.2-.7.1-.2 0-.4-.3-.4-.6 0-1.7-1.3-3-3-3s-3 1.3-3 3v.2c0 .2-.1.4-.3.5-.1 0-.1 0-.2.1-.2.1-.5 0-.8-.2-1.2-1.2-3.1-1.2-4.2 0-1.2 1.2-1.2 3.1.1 4.3.2.2.2.5.1.8-.1.2-.4.4-.7.4-1.7 0-3 1.3-3 3s1.3 3 3 3h.2c.3 0 .5.2.6.4s.1.5-.2.8c-.6.6-.9 1.3-.9 2.1s.3 1.5.9 2.1c1.2 1.2 3.1 1.2 4.3-.1.2-.2.5-.2.8-.1s.4.3.4.7c0 1.7 1.3 3 3 3s3-1.3 3-3v-.2c0-.3.2-.5.4-.6s.5-.1.8.2c1.2 1.2 3.1 1.2 4.2 0 1.2-1.2 1.2-3.1-.1-4.3-.1-.2-.2-.5-.1-.7zm-1.8-.8c-.4 1-.2 2.1.6 3 .2.2.3.4.3.7s-.1.5-.3.7-.4.3-.7.3c-.3 0-.5-.1-.8-.4-.8-.8-1.9-1-2.9-.5-1 .4-1.6 1.4-1.6 2.4v.2c0 .6-.4 1-1 1s-1-.4-1-1v-.1c0-1.1-.7-2-1.7-2.4-.3-.2-.7-.2-1.1-.2-.7 0-1.4.3-1.9.8-.4.4-1 .4-1.4 0-.2-.2-.3-.4-.3-.7s.1-.5.4-.8c.8-.8 1-1.9.5-2.9-.4-1-1.4-1.6-2.4-1.6h-.2c-.6 0-1-.4-1-1s.4-1 1-1h.1c1.1 0 2-.7 2.4-1.7s.2-2.1-.6-3c-.4-.4-.4-1 0-1.4s1-.4 1.5.1c.7.7 1.8.9 2.7.6.1 0 .2 0 .3-.1 1-.4 1.6-1.4 1.6-2.4v-.2c0-.6.4-1 1-1s1 .4 1 1.1c0 1.1.6 2 1.6 2.4s2.1.2 3-.6c.2-.2.4-.3.7-.3s.5.1.7.3c.4.4.4 1-.1 1.5-.7.7-.9 1.8-.6 2.7 0 .1 0 .2.1.3.4 1 1.4 1.6 2.4 1.6h.2c.6 0 1 .4 1 1s-.4 1-1.1 1c-1 0-2 .6-2.4 1.6z\",\n  transform: \"\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    width: 24\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/settings.14755d32.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m9.01126408 21c0 .6-.40050063 1-1.00125156 1h-5.00625783c-1.70212766 0-3.00375469-1.3-3.00375469-3v-16c0-1.7 1.30162703-3 3.00375469-3h5.00625783c.60075093 0 1.00125156.4 1.00125156 1s-.40050063 1-1.00125156 1h-5.00625783c-.60075094 0-1.00125156.4-1.00125156 1v16c0 .6.40050062 1 1.00125156 1h5.00625783c.60075093 0 1.00125156.4 1.00125156 1zm10.91364202-9.6c.1001252-.2.1001252-.5 0-.8-.1001251-.1-.1001251-.2-.2002503-.3l-4.0050062-4c-.4005007-.4-1.0012516-.4-1.4017522 0-.4005007.4-.4005007 1 0 1.4l2.3028786 2.3h-9.61201505c-.60075094 0-1.00125156.4-1.00125156 1s.40050062 1 1.00125156 1h9.61201505l-2.3028786 2.3c-.4005007.4-.4005007 1 0 1.4.2002503.2.5006258.3.7008761.3s.5006257-.1.7008761-.3l4.0050062-4c.1001252-.1.2002503-.2.2002503-.3z\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 22,\n    viewBox: \"0 0 20 22\",\n    width: 20\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/logout.d4c1276a.svg\";\nexport { SvgComponent as ReactComponent };","import React from 'react'\nimport { Sidebar } from 'qwant-research-components'\nimport { Avatar } from '../../components'\nimport { connect } from 'react-redux'\nimport { Link, Redirect, NavLink } from 'react-router-dom'\n\nimport { signout } from '../../actions'\n\nimport styles from './Sidebar.module.scss'\nimport { ReactComponent as AppsIcon } from '../../assets/cards.svg'\nimport { ReactComponent as PhoneIcon } from '../../assets/phone.svg'\nimport { ReactComponent as SettingsIcon } from '../../assets/settings.svg'\nimport { ReactComponent as LogoutIcon } from '../../assets/logout.svg'\n\nconst Apps = ({ user, signout, ...props }) => {\n  if (!user) return <Redirect to='/' />\n\n  return (\n    <Sidebar>\n      <div className={styles.header}>\n        <Avatar {...user} size={64} />\n        <h2>{user.username}</h2>\n      </div>\n      <div className={styles.nav}>\n        <NavLink to='/apps' className={styles.navElement} activeClassName={styles.active}>\n          <AppsIcon fill='white' opacity={0.8} width={24} />\n          <p className='label'>Applications</p>\n        </NavLink>\n        <NavLink to='/devices' className={styles.navElement} activeClassName={styles.active}>\n          <PhoneIcon fill='white' opacity={0.8} width={24} />\n          <p className='label'>Appareils</p>\n        </NavLink>\n        <NavLink to='/settings' className={styles.navElement} activeClassName={styles.active}>\n          <SettingsIcon fill='white' opacity={0.8} width={24} />\n          <p className='label'>Paramtres</p>\n        </NavLink>\n      </div>\n      <div className={styles.logout} onClick={signout}>\n        <Link to='/' className={styles.navElement}>\n          <LogoutIcon fill='white' opacity={0.8} width={24} />\n          <p className='label'>Dconnexion</p>\n        </Link>\n      </div>\n    </Sidebar>\n  )\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.masq.currentUser\n})\n\nconst mapDispatchToProps = dispatch => ({\n  signout: user => dispatch(signout(user))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Apps)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Button, TextField } from 'qwant-research-components'\n\nimport { updateUser } from '../../actions'\nimport { Avatar } from '../../components'\n\nimport styles from './Settings.module.scss'\n\nclass Settings extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      image: '',\n      lastname: '',\n      firstname: '',\n      username: ''\n    }\n\n    this.hasChanged = false\n    this.validate = this.validate.bind(this)\n    this.isValid = this.isValid.bind(this)\n    this.handleKeyUp = this.handleKeyUp.bind(this)\n  }\n\n  componentDidMount () {\n    const { user } = this.props\n    if (!user) return\n\n    this.setState({\n      image: user.image,\n      lastname: user.lastname,\n      firstname: user.firstname,\n      username: user.username\n    })\n  }\n\n  isValid (fieldName) {\n    if (fieldName === 'image') return true\n    return this.state[fieldName].length > 0\n  }\n\n  onChange (field, event) {\n    const value = event.target.value.trim()\n    this.hasChanged = true\n    this.setState({\n      [field]: value\n    })\n  }\n\n  onImageChange (event) {\n    const reader = new window.FileReader()\n    const file = event.target.files[0]\n    if (!file) {\n      return\n    }\n\n    reader.addEventListener('load', () => {\n      this.hasChanged = true\n      this.setState({ image: reader.result })\n    })\n    reader.readAsDataURL(file)\n  }\n\n  validate () {\n    if (!this.hasChanged) {\n      return\n    }\n\n    // Every fields should be valid\n    const isValid = Object.keys(this.state).every(key => this.isValid(key))\n    // If invalid, return\n    if (!isValid) {\n      // forceUpdate to show errors\n      return this.forceUpdate()\n    }\n\n    this.props.updateUser(this.props.user.id, this.state)\n    this.hasChanged = false\n  }\n\n  handleKeyUp (e) {\n    if (e.key === 'Enter') {\n      this.validate()\n    }\n  }\n\n  render () {\n    if (!this.props.user) return <Redirect to='/' />\n\n    return (\n      <div className={styles.Settings}>\n        <div>\n          <div className={styles.titleContainer}>\n            <p className='title'>Vos paramtres d'utilisateur</p>\n            <p className='subtitle'>Changez vos informations personnelles</p>\n          </div>\n\n          <div className={styles.profile}>\n            <Avatar upload size={192} image={this.state.image} onChange={(e) => this.onImageChange(e)} />\n            <div className={styles.inputs}>\n              <TextField\n                label={'Nom'}\n                error={!this.isValid('lastname')}\n                onKeyUp={this.handleKeyUp}\n                defaultValue={this.state.lastname} onChange={(e) => this.onChange('lastname', e)}\n              />\n              <TextField\n                label={'Prnom'}\n                error={!this.isValid('firstname')}\n                onKeyUp={this.handleKeyUp}\n                defaultValue={this.state.firstname} onChange={(e) => this.onChange('firstname', e)}\n              />\n              <TextField\n                label={'Pseudo (affich)'}\n                error={!this.isValid('username')}\n                onKeyUp={this.handleKeyUp}\n                defaultValue={this.state.username} onChange={(e) => this.onChange('username', e)}\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className={styles.sidebar}>\n          <Button width={200} secondary={!this.hasChanged} label='SAUVEGARDER' onClick={this.validate} />\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  user: state.masq.currentUser\n})\n\nconst mapDispatchToProps = dispatch => ({\n  updateUser: (id, user) => dispatch(updateUser(id, user))\n})\n\nSettings.propTypes = {\n  user: PropTypes.object.isRequired,\n  updateUser: PropTypes.func\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings)\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { HashRouter as Router, Route } from 'react-router-dom'\n\nimport { Login, Apps, Devices, Settings, Sidebar } from './containers'\n// import { AuthApp } from './modals'\nimport { addDevice, syncProfiles, createApp } from './actions'\n\nconst authenticatedRoutes = [\n  {\n    path: '/apps',\n    sidebar: Sidebar,\n    main: Apps\n  },\n  {\n    path: '/devices',\n    sidebar: Sidebar,\n    main: Devices\n  },\n  {\n    path: '/settings',\n    sidebar: Sidebar,\n    main: Settings\n  }\n]\n\nclass App extends Component {\n  constructor () {\n    super()\n\n    this.dbMasqPrivate = null\n    this.dbMasqPublic = null\n    this.dbs = {} // all replicated dbs\n    this.sw = null\n\n    this.state = {\n      apps: [],\n      user: '',\n      messages: [],\n      hash: null\n    }\n\n    this.handleInput = this.handleInput.bind(this)\n  }\n\n  async componentDidMount () {\n    if (!this.props.devices.length) {\n      const { name, os } = require('detect-browser').detect()\n      this.props.addDevice({\n        name: `${name} sur ${os}`,\n        description: 'Cet appareil',\n        color: '#40ae6c'\n      })\n    }\n\n    const url = new URL(window.location.href)\n    const channel = url.searchParams.get('channel')\n    const challenge = url.searchParams.get('challenge')\n    const app = url.searchParams.get('appName')\n    const profileId = url.searchParams.get('profileID')\n\n    if (channel && challenge && !app) {\n      this.props.syncProfiles(channel, challenge)\n    }\n\n    if (channel && challenge && app && profileId) {\n      this.props.createApp(channel, challenge, app, profileId)\n    }\n  }\n\n  appendMessage (msg) {\n    this.setState({ messages: [...this.state.messages, msg] })\n  }\n\n  handleInput (e) {\n    this.setState({ input: e.target.value })\n  }\n\n  render () {\n    return (\n      <Router>\n        <div>\n          <Route exact path='/' component={Login} />\n\n          {/* <Route path='/registerapp/:channel/:challenge/:app' component={AuthApp} /> */}\n\n          <div style={{ display: 'flex' }}>\n            {authenticatedRoutes.map((route, index) => (\n              <Route\n                key={index}\n                path={route.path}\n                component={route.sidebar}\n              />\n            ))}\n\n            {authenticatedRoutes.map((route, index) => (\n              <Route\n                key={index}\n                path={route.path}\n                component={route.main}\n              />\n            ))}\n          </div>\n        </div>\n      </Router>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  currentUser: state.masq.currentUser,\n  devices: state.masq.devices,\n  users: state.masq.users\n})\n\nconst mapDispatchToProps = dispatch => ({\n  addDevice: (profileId, device) => dispatch(addDevice(profileId, device)),\n  syncProfiles: (channel, challenge) => dispatch(syncProfiles(channel, challenge)),\n  createApp: (channel, challenge, app, profileId) => dispatch(createApp(channel, challenge, app, profileId))\n})\n\nApp.propTypes = {\n  syncProfiles: PropTypes.func,\n  addDevice: PropTypes.func,\n  devices: PropTypes.arrayOf(PropTypes.object),\n  createApp: PropTypes.func\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Card } from 'qwant-research-components'\n\nimport styles from './Devices.module.scss'\n\nconst Devices = ({ user, devices }) => {\n  if (!user) return <Redirect to='/' />\n\n  return (\n    <div className={styles.Devices}>\n      <p className='title'>Mes Appareils</p>\n      <p className='subtitle'>Retrouvez la liste de vos appareils connects  Masq</p>\n      {devices.map((device, index) => (\n        <div key={index} className={styles.Card}>\n          <Card minHeight={64} title={device.name} color={device.color} description={device.description} />\n        </div>\n      ))}\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.masq.currentUser,\n  devices: state.masq.devices\n})\n\nDevices.propTypes = {\n  user: PropTypes.object,\n  devices: PropTypes.arrayOf(PropTypes.object)\n}\n\nexport default connect(mapStateToProps)(Devices)\n","import React from 'react'\nimport { render } from 'react-dom'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport { Provider } from 'react-redux'\n\nimport * as serviceWorker from './serviceWorker'\nimport rootReducer from './reducers'\nimport App from './App'\n\nimport './styles/index.scss'\nimport 'typeface-asap'\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n\nconst store = createStore(\n  rootReducer,\n  composeEnhancer(applyMiddleware(thunkMiddleware))\n)\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Login\":\"Login_Login__wfqrh\",\"title\":\"Login_title__3eXjA\",\"Logo\":\"Login_Logo__2J8VH\",\"users\":\"Login_users__HBP7A\",\"PlusSquare\":\"Login_PlusSquare__2_U-f\",\"user\":\"Login_user__cxBIE\",\"Background\":\"Login_Background__1QUKU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AuthApp\":\"AuthApp_AuthApp__2znKd\",\"title\":\"AuthApp_title__3fm6b\",\"appTitle\":\"AuthApp_appTitle__1hdWP\",\"description\":\"AuthApp_description__iwDDs\",\"buttons\":\"AuthApp_buttons__2kMVu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Settings\":\"Settings_Settings__2bGKW\",\"titleContainer\":\"Settings_titleContainer__Q_pGq\",\"profile\":\"Settings_profile__1Xw8B\",\"inputs\":\"Settings_inputs__1NjVV\",\"fields\":\"Settings_fields__3aGf-\",\"TextInput\":\"Settings_TextInput__4_v0n\",\"button-container\":\"Settings_button-container__2o5Y6\",\"parameters\":\"Settings_parameters__3pUx0\",\"sidebar\":\"Settings_sidebar__1TH_C\",\"appSettings\":\"Settings_appSettings__2fdbG\",\"buttons\":\"Settings_buttons__27ct6\",\"exportButton\":\"Settings_exportButton__3VNoZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Apps\":\"Apps_Apps__2G1xS\",\"Card\":\"Apps_Card__1FgkF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Devices\":\"Devices_Devices__3xseY\",\"Card\":\"Devices_Card__2NXMk\"};","import rai from 'random-access-idb'\nimport signalhub from 'signalhubws'\nimport hyperdb from 'hyperdb'\nimport swarm from 'webrtc-swarm'\nimport pump from 'pump'\nimport uuidv4 from 'uuid/v4'\n\nimport promiseHyperdb from './promiseHyperdb'\n\nconst HUB_URLS = ['wss://signalhub-jvunerwwrg.now.sh']\n\n/**\n * Open or create a hyperdb instance\n * @param {string} name The indexeddb store name\n */\nconst openOrCreateDB = (name) => {\n  return hyperdb(rai(name), {\n    valueEncoding: 'json',\n    firstNode: true\n  })\n}\n\n/**\n * Replicate a database in a swarm indefinitely,\n * using db.discoveryKey as channel name\n * @param {object} db\n */\nconst replicateDB = db => {\n  const discoveryKey = db.discoveryKey.toString('hex')\n  const hub = signalhub(discoveryKey, HUB_URLS)\n  const sw = swarm(hub)\n\n  sw.on('peer', peer => {\n    const stream = db.replicate({ live: true })\n    pump(peer, stream, peer)\n  })\n}\n\nconst dbReady = db =>\n  new Promise(resolve =>\n    db.on('ready', () => resolve())\n  )\n\nclass Masq {\n  constructor () {\n    this.dbs = {\n      core: null,\n      profiles: null\n    }\n  }\n\n  /**\n   * Initialize Masq: Open core and profiles databases\n   * and replicate them in their respective swarms.\n   */\n  async init () {\n    // create or open core and profiles databases\n    this.dbs.core = openOrCreateDB('masq-core')\n    this.dbs.profiles = openOrCreateDB('masq-profiles')\n\n    Object.values(this.dbs).forEach(db =>\n      db.on('ready', () => replicateDB(db))\n    )\n\n    const profiles = await this.getProfiles()\n    const profilesIds = profiles.map(p => p.id)\n    profilesIds.forEach(async (id) => {\n      const apps = await this.getApps(id)\n      apps.forEach(app => {\n        const dbName = id + '-' + app.name\n        const db = openOrCreateDB(dbName)\n        this.dbs[dbName] = db\n        db.on('ready', () => replicateDB(db))\n      })\n    })\n  }\n\n  /**\n   * Add a new profile to the core and profiles databases\n   * @param {object} profile The new profile to add\n   */\n  async addProfile (profile) {\n    const node = await promiseHyperdb.get(this.dbs.core, '/profiles')\n    const ids = node ? node.value : []\n    const id = uuidv4()\n    profile['id'] = id\n    const batch = [{\n      type: 'put',\n      key: '/profiles',\n      value: [...ids, id]\n    }, {\n      type: 'put',\n      key: `/profiles/${id}`,\n      value: profile\n    }]\n\n    await promiseHyperdb.batch(this.dbs.core, batch)\n    await promiseHyperdb.batch(this.dbs.profiles, batch)\n  }\n\n  /**\n   * Get private profiles from core db\n   */\n  async getProfiles () {\n    const node = await promiseHyperdb.get(this.dbs.core, '/profiles')\n    if (!node) return []\n\n    const ids = node.value\n    const profilePromises = ids.map(\n      id => promiseHyperdb.get(this.dbs.core, `/profiles/${id}`)\n    )\n    const profileNodes = await Promise.all(profilePromises)\n    const profiles = profileNodes.map(n => n.value)\n    return profiles\n  }\n\n  /**\n   * Update an existing profile\n   * @param {object} profile The updated profile\n   */\n  async updateProfile (profile) {\n    const id = profile.id\n    if (!id) throw Error('Missing id')\n\n    await promiseHyperdb.put(this.dbs.core, `/profile/${id}`, profile)\n    await promiseHyperdb.put(this.dbs.profiles, `/profiles/${id}`, profile)\n  }\n\n  /**\n   * Add an app to a specified profile\n   * @param {number} profileId The profile id the app belongs to\n   * @param {object} app The app\n   */\n  addApp (profileId, app) {\n    return this._createResource(profileId, 'apps', app)\n  }\n\n  /**\n   * Add a device to a specified profile\n   * @param {number} profileId The profile id the app belongs to\n   * @param {object} device The device\n   */\n  addDevice (profileId, device) {\n    return this._createResource(profileId, 'devices', device)\n  }\n\n  /**\n   * Get all apps attached to a profile id\n   * @param {number} profileId The profile id for which we get the apps\n   */\n  getApps (profileId) {\n    return this._getResources(profileId, 'apps')\n  }\n\n  /**\n   * Get all devices attached to a profile id\n   * @param {number} profileId The profile id for which we get the devices\n   */\n  getDevices (profileId) {\n    return this._getResources(profileId, 'devices')\n  }\n\n  /**\n   * Update an app\n   * @param {number} profileId The profile id to which the app is attached\n   * @param {object} app The updated app\n   */\n  updateApp (profileId, app) {\n    return this._updateResource(profileId, 'apps', app)\n  }\n\n  /**\n   * Update a device\n   * @param {number} profileId The profile id to which the device is attached\n   * @param {object} device The updated device\n   */\n  async updateDevice (profileId, device) {\n    this._updateResource(profileId, 'devices', device)\n  }\n\n  async syncProfiles (channel, challenge) {\n    await dbReady(this.dbs.profiles)\n    const hub = signalhub(channel, HUB_URLS)\n    const sw = swarm(hub)\n\n    sw.on('close', () => hub.close())\n\n    sw.on('peer', (peer) => {\n      peer.on('data', data => {\n        sw.close()\n      })\n\n      peer.send(JSON.stringify({\n        msg: 'sendProfilesKey',\n        challenge: challenge,\n        key: this.dbs.profiles.key.toString('hex')\n      }))\n    })\n  }\n\n  createApp (channel, challenge, appName, profileId) {\n    return new Promise(async (resolve, reject) => {\n      const dbName = profileId + '-' + appName\n      const apps = await this.getApps(profileId)\n      if (apps.find(app => app.name === app)) {\n        return resolve()\n      }\n\n      const hub = signalhub(channel, HUB_URLS)\n      const sw = swarm(hub)\n\n      sw.on('close', () => hub.close())\n\n      sw.on('peer', async (peer) => {\n        let db = null\n\n        peer.on('data', async (data) => {\n          const json = JSON.parse(data)\n          if (json.msg === 'appInfo') {\n            await this.addApp(profileId, {\n              name: json.name,\n              description: json.description,\n              image: json.image\n            })\n          }\n\n          if (json.msg === 'requestWriteAccess') {\n            // authorize local key & start replication\n            db.authorize(Buffer.from(json.key, 'hex'), (err) => {\n              if (err) throw err\n              peer.send(JSON.stringify({ msg: 'ready' }))\n              sw.close()\n              resolve()\n            })\n          }\n        })\n\n        db = openOrCreateDB(dbName)\n        this.dbs[dbName] = db\n\n        db.on('ready', () => {\n          peer.send(JSON.stringify({\n            msg: 'sendDataKey',\n            challenge: challenge,\n            key: db.key.toString('hex')\n          }))\n        })\n      })\n    })\n  }\n\n  /**\n   * Private methods\n   */\n\n  async _createResource (profileId, name, res) {\n    if (!profileId) throw Error('missing profileId')\n\n    const node = await promiseHyperdb.get(this.dbs.core, `/profiles/${profileId}/${name}`)\n    const ids = node ? node.value : []\n    const id = uuidv4()\n    res['id'] = id\n\n    const batch = [{\n      type: 'put',\n      key: `/profiles/${profileId}/${name}`,\n      value: [...ids, id]\n    }, {\n      type: 'put',\n      key: `/profiles/${profileId}/${name}/${id}`,\n      value: res\n    }]\n\n    await promiseHyperdb.batch(this.dbs.core, batch)\n  }\n\n  async _getResources (profileId, name) {\n    if (!profileId) throw Error('missing profileId')\n\n    const node = await promiseHyperdb.get(this.dbs.core, `/profiles/${profileId}/${name}`)\n    if (!node) return []\n\n    const ids = node.value\n    const resourcePromises = ids.map(\n      id => promiseHyperdb.get(this.dbs.core, `/profiles/${profileId}/${name}/${id}`)\n    )\n    const resourceNodes = await Promise.all(resourcePromises)\n    const resources = resourceNodes.map(n => n.value)\n    return resources\n  }\n\n  async _updateResource (profileId, name, res) {\n    if (!profileId) throw Error('missing profileId')\n\n    const id = res.id\n    if (!id) throw Error('Missing id')\n\n    return promiseHyperdb.put(this.dbs.core, `/profiles/${profileId}/${name}/${id}`, res)\n  }\n}\n\nexport default Masq\n"],"sourceRoot":""}