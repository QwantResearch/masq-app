{"version":3,"sources":["actions/index.js","assets/camera-square.svg","components/Avatar/Avatar.jsx","assets/close.svg","components/Modal/Modal.jsx","components/index.js","serviceWorker.js","reducers/masq.js","reducers/index.js","index.js","modals/Signup/Signup.module.scss","containers/Sidebar/Sidebar.module.scss","library/utils.js","containers/Login/Login.module.scss","assets/logo.svg","assets/background.svg","assets/plus-square.svg","containers/Login/Login.jsx","containers/Apps/Apps.jsx","assets/cards.svg","assets/phone.svg","assets/settings.svg","assets/logout.svg","containers/Sidebar/Sidebar.jsx","containers/Settings/Settings.jsx","containers/Devices/Devices.jsx","containers/index.js","modals/AuthApp/AuthApp.module.scss","containers/Settings/Settings.module.scss","modals/Signup/Signup.jsx","modals/AuthApp/AuthApp.jsx","modals/index.js","containers/Apps/Apps.module.scss","containers/Devices/Devices.module.scss","library/masq.js","App.jsx"],"names":["__webpack_require__","d","__webpack_exports__","signin","signout","updateUser","signup","fetchUsers","addDevice","fetchApps","setCurrentAppRequest","handleUserAppLogin","handleUserAppRegister","masq","Masq","user","dispatch","openProfile","id","then","profile","type","closeProfile","updateProfile","addProfile","addUser","getProfiles","users","receiveUsers","device","getApps","apps","receiveApps","app","updateCurrentAppRequest","update","channel","key","appId","isConnected","isAccepted","_extends","Object","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","apply","this","camera_square_ref","react_default","a","createElement","fill","fillRule","height","opacity","rx","stroke","strokeWidth","width","x","y","camera_square_SvgComponent","props","viewBox","Replace","p","_ref","size","image","onClick","main","upload","src","NewUpload","_ref2","style","className","color","Avatar","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","openDialog","bind","assertThisInitialized","refs","fileDialog","click","_this$props","username","onChange","backgroundImage","name","ref","display","accept","Avatar_Replace","Avatar_NewUpload","backgroundColor","position","toUpperCase","React","Component","close_extends","defaultProps","close_ref","close_ref2","xlinkHref","close_SvgComponent","Modal","onClose","children","modalStyle","Avatar_Avatar_Avatar","Modal_Modal","Boolean","window","location","hostname","match","state","undefined","devices","currentUser","currentAppRequest","action","objectSpread","toConsumableArray","concat","combineReducers","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","rootReducer","applyMiddleware","thunkMiddleware","render","react_redux_es","App","document","getElementById","navigator","serviceWorker","ready","registration","unregister","module","exports","Signup","title","buttons","TextField","header","nav","navElement","active","logout","dbReady","db","Promise","resolve","reject","on","genIV","initializationVector","Uint8Array","crypto","getRandomValues","encryptMessage","_callee2","data","strData","bufferData","iv","encrypted","encryptedBase64","ivBase64","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","wrap","_context2","prev","next","JSON","stringify","Buffer","from","subtle","encrypt","sent","toString","abrupt","stop","decryptMessage","_callee3","encryptedJson","encryptedData","decryptedData","decryptedDataBuffer","decryptedJson","_context3","parse","decrypt","importKey","rawKey","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","mark","_callee","_context","t0","_x5","_x6","Login","Logo","PlusSquare","Background","logo_ref","fillOpacity","logo_SvgComponent","background_extends","background_ref","_ref3","_ref4","background_SvgComponent","preserveAspectRatio","plus_square_extends","plus_square_ref","plus_square_ref2","plus_square_SvgComponent","xmlnsXlink","isSignupModalOpened","isLoggedIn","handleSignup","handleClickNewUser","setState","_this2","Redirect","to","styles","map","handleSignIn","components","modals","onSignup","connect","Apps","index","Card","minHeight","description","PureComponent","cards_extends","cards_ref","transform","cards_SvgComponent","phone_extends","phone_ref","phone_SvgComponent","settings_extends","settings_ref","settings_SvgComponent","logout_extends","logout_ref","logout_SvgComponent","SidebarApp","NavLink","activeClassName","Settings","lastname","firstname","hasChanged","validate","isValid","handleKeyUp","fieldName","field","event","value","trim","defineProperty","reader","FileReader","file","files","addEventListener","result","readAsDataURL","_this3","keys","every","forceUpdate","e","_this4","titleContainer","onImageChange","inputs","label","error","onKeyUp","defaultValue","sidebar","secondary","Devices","containers_Login_Login","containers_Apps_Apps","Sidebar","containers_Settings_Settings","containers_Devices_Devices","AuthApp","appTitle","fields","TextInput","button-container","parameters","appSettings","exportButton","password","passwordConfirmation","currentStep","validationEnabled","refAvatar","createRef","finish","previous","current","Fragment","paddingTop","paddingBottom","autoFocus","loading","handleOk","handleRefuse","handleAccept","appRequest","asyncToGenerator","regenerator_default","react","renderButtons","modals_Signup_Signup","modals_AuthApp_AuthApp","HUB_URLS","process","split","swarmOpts","openOrCreateDB","promisifyAll","hyperdb","rai","valueEncoding","firstNode","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","profileId","profileDB","appsDBs","swarms","hubs","sw","hub","peer","Error","_startReplicate","forEach","dbName","getAsync","_stopAllReplicates","uuidv4","putAsync","_setProfileToLocalStorage","_getProfilesFromLocalStorage","_checkProfile","_createResource","_getResources","_updateResource","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","_callee11","sendAuthorized","sendNotAuthorized","_context11","_callee7","msg","_context7","send","_x10","_x11","_callee8","_context8","_x12","signalhub","swarm","_closeUserAppConnection","_callee10","_context10","find","once","_ref5","_callee9","json","imageURL","_context9","_x14","_x13","_x8","_x9","isGranted","_ref6","_callee17","sendAccessRefused","sendAccessGranted","sendWriteAccessGranted","handleData","_context17","_ref7","_callee13","_context13","_x18","_ref8","_callee14","dbKey","_context14","_x19","_x20","_x21","_ref9","_callee15","_context15","_x22","_ref10","_callee16","userAppKey","_context16","authorize","err","close","_x23","_x24","addApp","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","_x16","_x17","res","node","ids","batch","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","batchAsync","resourcePromises","all","resourceNodes","resources","n","localStorage","setItem","getItem","discoveryKey","stream","replicate","live","pump","values","_this5","authenticatedRoutes","path","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__","dbMasqPrivate","dbMasqPublic","dbs","messages","hash","handleInput","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__","_require$detect","require","detect","os","substr","decoded","_JSON$parse","_JSON$parse2","_home_gbonneville_src_masq_app_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","input","react__WEBPACK_IMPORTED_MODULE_10___default","react_router_dom__WEBPACK_IMPORTED_MODULE_12__","_modals__WEBPACK_IMPORTED_MODULE_16__","react_router_dom__WEBPACK_IMPORTED_MODULE_13__","component","route"],"mappings":"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","file":"static/js/main.16a64d0c.chunk.js","sourcesContent":["import { Masq } from '../library'\n\nconst masq = new Masq()\n\nconst addUser = user => ({\n  type: 'ADD_USER',\n  user\n})\n\nconst receiveUsers = users => ({\n  type: 'RECEIVE_USERS',\n  users\n})\n\nconst receiveApps = apps => ({\n  type: 'RECEIVE_APPS',\n  apps\n})\n\nexport const signin = user => {\n  return function (dispatch) {\n    return masq.openProfile(user.id)\n      .then((profile) => dispatch({\n        type: 'SIGNIN',\n        profile\n      }))\n  }\n}\n\nexport const signout = () => {\n  return function (dispatch) {\n    return masq.closeProfile()\n      .then(() => dispatch({\n        type: 'SIGNOUT'\n      }))\n  }\n}\n\nexport const updateUser = (id, user) => {\n  user.id = id\n  return function (dispatch) {\n    return masq.updateProfile(user)\n      .then(() => dispatch(signin(user)))\n  }\n}\n\nexport const signup = user => {\n  return function (dispatch) {\n    return masq.addProfile(user)\n      .then(() => dispatch(addUser(user)))\n  }\n}\n\nexport const fetchUsers = () => {\n  return function (dispatch) {\n    return masq.getProfiles()\n      .then(users => dispatch(receiveUsers(users)))\n  }\n}\n\nexport const addDevice = device => ({\n  type: 'ADD_DEVICE',\n  device\n})\n\nexport const fetchApps = () => {\n  return function (dispatch) {\n    return masq.getApps()\n      .then(apps => dispatch(receiveApps(apps)))\n  }\n}\n\nexport const fetchCurrentAppRequestStatus = () => ({\n  type: 'FETCH_CURRENT_APP_REQUEST_STATUS'\n})\n\nexport const setCurrentAppRequest = app => {\n  return {\n    type: 'SET_CURRENT_APP_REQUEST',\n    app\n  }\n}\n\nexport const updateCurrentAppRequest = update => {\n  return {\n    type: 'UPDATE_CURRENT_APP_REQUEST',\n    update\n  }\n}\n\nexport const handleUserAppLogin = (channel, key, appId) => {\n  return function (dispatch) {\n    return masq.handleUserAppLogin(channel, key, appId)\n      .then((isConnected) => dispatch(updateCurrentAppRequest({\n        isConnected: isConnected\n      })))\n  }\n}\n\nexport const handleUserAppRegister = (isAccepted) => {\n  return function (dispatch) {\n    return masq.handleUserAppRegister(isAccepted)\n      .then(() => dispatch(updateCurrentAppRequest({\n        isConnected: isAccepted\n      })))\n  }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"rect\", {\n  height: 118,\n  opacity: .5,\n  rx: 10,\n  stroke: \"#999\",\n  strokeWidth: 2,\n  width: 118,\n  x: 1,\n  y: 1\n}), React.createElement(\"path\", {\n  d: \"m77.2 46.6h-6.5333333l-3.1733334-4.8533333c-.3733333-.3733334-.9333333-.7466667-1.4933333-.7466667h-11.2c-.56 0-1.12.3733333-1.4933333.7466667l-3.1733334 4.8533333h-6.5333333c-3.1733333 0-5.6 2.4266667-5.6 5.6v20.5333333c0 3.1733334 2.4266667 5.6 5.6 5.6h33.6c3.1733333 0 5.6-2.4266666 5.6-5.6v-20.5333333c0-3.1733333-2.4266667-5.6-5.6-5.6zm1.8666667 26.1333333c0 1.12-.7466667 1.8666667-1.8666667 1.8666667h-33.6c-1.12 0-1.8666667-.7466667-1.8666667-1.8666667v-20.5333333c0-1.12.7466667-1.8666667 1.8666667-1.8666667h7.4666667c.56 0 1.12-.3733333 1.4933333-.7466666l3.1733333-4.8533334h9.1466667l3.1733333 4.8533334c.56.3733333 1.12.7466666 1.68.7466666h7.4666667c1.12 0 1.8666667.7466667 1.8666667 1.8666667zm-18.6666667-20.5333333c-5.2266667 0-9.3333333 4.1066667-9.3333333 9.3333333 0 5.2266667 4.1066666 9.3333334 9.3333333 9.3333334s9.3333333-4.1066667 9.3333333-9.3333334c0-5.2266666-4.1066666-9.3333333-9.3333333-9.3333333zm0 14.9333333c-3.1733333 0-5.6-2.4266666-5.6-5.6 0-3.1733333 2.4266667-5.6 5.6-5.6s5.6 2.4266667 5.6 5.6c0 3.1733334-2.4266667 5.6-5.6 5.6z\",\n  fill: \"#ccc\",\n  fillRule: \"nonzero\"\n}));\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 120,\n    viewBox: \"0 0 120 120\",\n    width: 120\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/camera-square.75a605b6.svg\";\nexport { SvgComponent as ReactComponent };","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Avatar as AvatarBase } from 'qwant-research-components'\n\nimport { ReactComponent as CameraSquare } from '../../assets/camera-square.svg'\n\nimport './Avatar.css'\n\nconst Replace = ({ size, image, onClick }) =>\n  <AvatarBase upload src={image} width={size} height={size} onClick={onClick} />\n\nReplace.propTypes = {\n  size: PropTypes.number,\n  image: PropTypes.string.isRequired,\n  onClick: PropTypes.func\n}\n\nconst NewUpload = ({ style, onClick }) => (\n  <CameraSquare\n    className='Avatar upload'\n    color='var(--grey-200)'\n    style={style}\n    onClick={onClick}\n  />\n)\n\nNewUpload.propTypes = {\n  style: PropTypes.object,\n  onClick: PropTypes.func\n}\n\nexport default class Avatar extends React.Component {\n  constructor (props) {\n    super(props)\n    this.openDialog = this.openDialog.bind(this)\n  }\n\n  openDialog () {\n    this.refs.fileDialog.click()\n  }\n\n  render () {\n    const { size, image, username, upload, onChange } = this.props\n    const style = { backgroundImage: 'url(' + image + ')' }\n\n    if (upload) {\n      return (\n        <div>\n          <input name='avatar' type='file' ref='fileDialog'\n            style={{ display: 'none' }} onChange={onChange}\n            accept='.jpg, .jpeg, .png'\n          />\n\n          {image\n            ? <Replace size={size} image={image} onClick={this.openDialog} />\n            : <NewUpload style={style} onClick={this.openDialog} />\n          }\n        </div>)\n    }\n\n    return image\n      ? <AvatarBase src={image} width={size} height={size} />\n      : (\n        <div className='Avatar initials' style={{ backgroundColor: '#458bf8', position: 'relative', width: size, height: size }}>\n          <p>{username[0].toUpperCase()}</p>\n        </div>\n      )\n  }\n}\n\nAvatar.defaultProps = {\n  size: 120\n}\n\nAvatar.propTypes = {\n  size: PropTypes.number,\n  username: PropTypes.string,\n  upload: PropTypes.bool,\n  image: PropTypes.string,\n  onChange: PropTypes.func\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"path\", {\n  id: \"close-svg\",\n  d: \"M13.7 12.3c.4.4.4 1 0 1.4-.2.2-.4.3-.7.3-.3 0-.5-.1-.7-.3L7 8.4l-5.3 5.3c-.2.2-.4.3-.7.3-.3 0-.5-.1-.7-.3-.4-.4-.4-1 0-1.4L5.6 7 .3 1.7C-.1 1.3-.1.7.3.3c.4-.4 1-.4 1.4 0L7 5.6 12.3.3c.4-.4 1-.4 1.4 0 .4.4.4 1 0 1.4L8.4 7l5.3 5.3z\"\n}));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"use\", {\n  fill: \"currentColor\",\n  fillRule: \"nonzero\",\n  xlinkHref: \"#close-svg\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 14,\n    viewBox: \"0 0 14 14\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/close.56b2bac8.svg\";\nexport { SvgComponent as ReactComponent };","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { ReactComponent as Close } from '../../assets/close.svg'\n\nimport './Modal.scss'\n\nexport default function Modal ({ onClose, width, height, children }) {\n  const modalStyle = {\n    height: height,\n    width: width\n  }\n\n  return (\n    <div className='Modal'>\n      <div className='overlay' onClick={onClose} />\n      <div className='modal' style={modalStyle}>\n        {onClose && <Close className='close' width={9} height={9} onClick={onClose} />}\n        {children}\n      </div>\n    </div>\n  )\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  children: PropTypes.object\n}\n","export { default as Avatar } from './Avatar'\nexport { default as Modal } from './Modal'\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          )\n        })\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.')\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  window.fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","const masq = (state = {\n  users: [],\n  apps: [],\n  devices: [],\n  currentUser: null,\n  currentAppRequest: null\n}, action) => {\n  switch (action.type) {\n    case 'ADD_USER':\n      return {\n        ...state,\n        users: [...state.users, action.user]\n      }\n    case 'SIGNIN':\n      return {\n        ...state,\n        currentUser: action.profile\n      }\n    case 'SIGNOUT':\n      return {\n        ...state,\n        currentUser: null\n      }\n    case 'RECEIVE_USERS':\n      return {\n        ...state,\n        users: action.users\n      }\n    case 'RECEIVE_APPS':\n      return {\n        ...state,\n        apps: action.apps\n      }\n    case 'SET_CURRENT_APP_REQUEST':\n      return {\n        ...state,\n        currentAppRequest: action.app\n      }\n    case 'UPDATE_CURRENT_APP_REQUEST':\n      return {\n        ...state,\n        currentAppRequest: { ...state.currentAppRequest, ...action.update }\n      }\n    case 'ADD_APP':\n      return {\n        ...state,\n        apps: [...state.apps, action.app]\n      }\n    case 'ADD_DEVICE':\n      return {\n        ...state,\n        devices: [...state.devices, action.device]\n      }\n    default:\n      return state\n  }\n}\n\nexport default masq\n","import { combineReducers } from 'redux'\nimport masq from './masq'\n\nexport default combineReducers({\n  masq\n})\n","import React from 'react'\nimport { render } from 'react-dom'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport { Provider } from 'react-redux'\n\nimport * as serviceWorker from './serviceWorker'\nimport rootReducer from './reducers'\nimport App from './App'\n\nimport './styles/index.scss'\nimport 'typeface-asap'\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n\nconst store = createStore(\n  rootReducer,\n  composeEnhancer(applyMiddleware(thunkMiddleware))\n)\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Signup\":\"Signup_Signup__2YyBN\",\"title\":\"Signup_title__iRIvM\",\"user\":\"Signup_user__1BFZq\",\"buttons\":\"Signup_buttons__2IjiQ\",\"TextField\":\"Signup_TextField__33SKF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Sidebar_header__K-cJy\",\"nav\":\"Sidebar_nav__3f7iE\",\"navElement\":\"Sidebar_navElement__3kiOF\",\"active\":\"Sidebar_active__2gOBr\",\"logout\":\"Sidebar_logout__3KfCS\"};","function dbReady (db) {\n  return new Promise((resolve, reject) => {\n    db.on('ready', () => {\n      resolve()\n    })\n  })\n}\n\nfunction genIV () {\n  const ivLen = 16\n  const initializationVector = new Uint8Array(ivLen)\n  window.crypto.getRandomValues(initializationVector)\n  return initializationVector\n}\n\nasync function encryptMessage (key, data) {\n  const strData = JSON.stringify(data)\n  const bufferData = Buffer.from(strData, 'utf8')\n  const iv = genIV()\n  const encrypted = await window.crypto.subtle.encrypt(\n    {\n      name: 'AES-GCM',\n      iv: iv\n    },\n    key,\n    bufferData)\n  const encryptedBase64 = Buffer.from(encrypted).toString('base64')\n  const ivBase64 = Buffer.from(iv).toString('base64')\n  return JSON.stringify({\n    encrypted: encryptedBase64,\n    iv: ivBase64\n  })\n}\n\nasync function decryptMessage (key, data) {\n  const encryptedJson = JSON.parse(data)\n  const iv = Buffer.from(encryptedJson.iv, 'base64')\n  const encryptedData = Buffer.from(encryptedJson.encrypted, 'base64')\n  const decryptedData = await window.crypto.subtle.decrypt(\n    {\n      name: 'AES-GCM',\n      iv: iv\n    },\n    key,\n    encryptedData\n  )\n  const decryptedDataBuffer = decryptedData\n  const decryptedJson = JSON.parse(Buffer.from(decryptedDataBuffer).toString('utf8'))\n  return decryptedJson\n}\n\nfunction importKey (rawKey) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const key = await window.crypto.subtle.importKey(\n        'raw', rawKey, { name: 'AES-GCM' }, false, ['encrypt', 'decrypt']\n      )\n      resolve(key)\n    } catch (err) {\n      reject(err)\n    }\n  })\n}\n\nexport { dbReady, encryptMessage, decryptMessage, importKey }\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Login\":\"Login_Login__wfqrh\",\"title\":\"Login_title__3eXjA\",\"Logo\":\"Login_Logo__2J8VH\",\"users\":\"Login_users__HBP7A\",\"PlusSquare\":\"Login_PlusSquare__2_U-f\",\"user\":\"Login_user__cxBIE\",\"Background\":\"Login_Background__1QUKU\"};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"#FFF\",\n  fillRule: \"nonzero\"\n}, React.createElement(\"g\", {\n  fillOpacity: .5\n}, React.createElement(\"path\", {\n  d: \"M78.899 29.426l-.056-.487c0-.046-.045-.08-.09-.08h-.023c-.01 0-.01.012-.022.012a1.103 1.103 0 0 1-.393.068c-.158 0-.27-.046-.338-.125-.067-.09-.1-.227-.1-.43v-1.066h.808a.077.077 0 0 0 .079-.08v-.476c0-.045-.045-.08-.09-.08h-.809V25.993c0-.046-.045-.08-.09-.08h-.607c-.045 0-.078.034-.09.08v.69h-.472a.089.089 0 0 0-.09.092v.476c0 .045.034.079.068.09h.483v1.202c0 .374.09.657.259.839.168.181.438.272.786.272.146 0 .292-.012.427-.046.101-.022.203-.056.27-.09.067-.023.09-.046.09-.091 0 .011 0 .011 0 0zM65.155 28.769c-.01-.023-.022-.046-.033-.068-.012-.057.033-.114.067-.16.034-.045.056-.101.09-.158.056-.102.101-.215.135-.329.078-.238.1-.487.1-.736a2.605 2.605 0 0 0-.145-.782 1.98 1.98 0 0 0-.382-.624 2.048 2.048 0 0 0-.506-.43 1.98 1.98 0 0 0-.663-.261c-.247-.057-.506-.068-.753-.057-.258.023-.506.08-.742.193-.236.102-.449.249-.629.43a2.44 2.44 0 0 0-.45.624c-.112.238-.18.487-.202.748-.022.26-.01.521.045.77.057.25.158.488.293.704.134.215.303.396.494.544.191.147.416.26.64.34.124.045.259.068.394.09.123.023.247.034.37.023.124 0 .237-.011.36-.034.068-.011.135-.023.191-.034.056-.011.113-.023.135-.08.023-.045-.011-.09-.034-.135-.022-.057-.056-.102-.078-.16-.045-.101-.101-.192-.146-.294a.115.115 0 0 0-.068-.056c-.022-.012-.056 0-.078 0-.034.01-.068.01-.102.01-.134.024-.27.024-.404 0a1.466 1.466 0 0 1-.697-.294 1.557 1.557 0 0 1-.46-.59 1.563 1.563 0 0 1-.113-.747c.034-.25.124-.5.27-.703a1.5 1.5 0 0 1 .562-.465 1.441 1.441 0 0 1 1.404.09c.18.114.326.273.45.454a1.528 1.528 0 0 1 .112 1.383 1.57 1.57 0 0 1-.37.521c-.023.023-.046.035-.057.069a.098.098 0 0 0 0 .079l.416.839c.022.045.045.102.09.136.034.022.067.011.101.011h.64c.08 0 .135-.08.09-.159-.044-.079-.078-.158-.123-.226l-.214-.476zM68.931 28.644l.506-1.916a.085.085 0 0 1 .079-.056h.618c.045 0 .09.034.09.09v.023l-.9 2.709c-.01.034-.044.045-.078.045h-.585a.085.085 0 0 1-.078-.056l-.63-1.848-.606 1.848a.094.094 0 0 1-.079.045h-.573a.085.085 0 0 1-.079-.057l-.899-2.731c0-.046.034-.091.09-.091h.64c.034 0 .057.023.068.045l.506 1.927.584-1.915a.085.085 0 0 1 .079-.057h.528c.034 0 .067.023.079.045l.64 1.95zM72.471 27.034a.93.93 0 0 0-.382-.34 1.17 1.17 0 0 0-.528-.124c-.259 0-.495.068-.708.215-.214.136-.371.329-.483.555a1.724 1.724 0 0 0-.169.771v.057c.011.272.067.521.169.737.112.226.27.408.472.532.202.125.427.182.674.182.18 0 .337-.023.472-.08 0 0 .303-.102.472-.374l.011.295c.011.045.045.08.09.08h.573c.045 0 .09-.035.09-.091V26.75a.089.089 0 0 0-.09-.09h-.573a.098.098 0 0 0-.09.067v.306zm-.169.499c.135.147.191.34.191.578 0 .25-.067.442-.213.6a.694.694 0 0 1-.54.228.7.7 0 0 1-.539-.227.844.844 0 0 1-.213-.533s-.045-.374.213-.657c.135-.159.326-.227.55-.227-.01-.023.327-.045.551.238zM74.483 26.74c-.012-.046-.045-.08-.09-.08h-.585a.089.089 0 0 0-.09.09v2.699c0 .045.034.09.09.09h.607a.085.085 0 0 0 .079-.056v-1.485c0-.227.056-.408.157-.533a.535.535 0 0 1 .438-.193c.337 0 .506.227.506.67v1.54a.085.085 0 0 0 .079.057h.607c.044 0 .09-.034.09-.09v-1.655c0-.397-.09-.703-.27-.907-.18-.204-.439-.317-.776-.317-.202 0-.37.034-.517.113a.973.973 0 0 0-.348.329l.023-.272z\"\n})), React.createElement(\"path\", {\n  d: \"M21.497 8.887C20.587 7.833 19.25 7.3 17.52 7.3c-1.011 0-1.944.238-2.787.725-.854.476-1.472 1.122-1.876 1.905-.854-1.757-2.349-2.63-4.462-2.63-1.01 0-1.899.193-2.652.578a4.317 4.317 0 0 0-1.786 1.7l-.023-1.235a.574.574 0 0 0-.55-.578H.663a.578.578 0 0 0-.573.578v13.534c0 .317.258.578.573.578h2.82c.315 0 .574-.26.574-.578v-7.368c0-1.134.258-2.029.753-2.686.505-.658 1.202-.987 2.101-.987.9 0 1.55.284 1.955.84.405.555.618 1.427.618 2.595v7.594c0 .318.259.579.574.579h2.831c.315 0 .562-.25.574-.556v-7.356c0-1.157.247-2.063.753-2.71.505-.657 1.202-.986 2.078-.986.877 0 1.529.284 1.945.84.415.555.629 1.427.629 2.595v7.628c.022.307.27.545.573.545h2.832c.314 0 .573-.261.573-.579v-8.342c.022-2.03-.438-3.582-1.349-4.636zM39.938 7.753H37.23a.566.566 0 0 0-.55.578l-.046 1.327a4.816 4.816 0 0 0-1.932-1.746c-.81-.42-1.72-.624-2.709-.624-1.337 0-2.54.363-3.607 1.077a7.22 7.22 0 0 0-2.472 2.857c-.585 1.19-.877 2.493-.877 3.91 0 1.542.292 2.902.888 4.081.596 1.179 1.393 2.097 2.416 2.732 1.023.635 2.169.952 3.45.952 1.09 0 2.045-.193 2.866-.59a4.769 4.769 0 0 0 1.977-1.745l.045 1.292c0 .317.259.578.573.578h2.675c.315 0 .573-.26.573-.578V8.331a.583.583 0 0 0-.562-.578zm-4.281 10.395c-.73.793-1.652 1.19-2.776 1.19-1.124 0-2.056-.397-2.776-1.19-.73-.794-1.09-1.814-1.09-3.061 0-1.235.36-2.244 1.068-3.038.72-.793 1.64-1.179 2.787-1.179 1.146 0 2.079.397 2.787 1.18.719.793 1.067 1.802 1.067 3.037.023 1.258-.337 2.278-1.067 3.06zM48.153 22.92a12.28 12.28 0 0 1-3.147-.386c-.797-.204-1.45-.476-1.955-.782a.633.633 0 0 1-.28-.623l.291-1.95a.63.63 0 0 1 .91-.465c.461.238.956.442 1.506.612a8.379 8.379 0 0 0 2.506.408c1.619 0 2.439-.419 2.439-1.246 0-.442-.169-.783-.517-1.01-.348-.226-1.056-.498-2.146-.804-1.72-.476-2.945-1.088-3.675-1.836-.73-.737-1.101-1.735-1.101-2.993 0-1.405.528-2.516 1.573-3.321 1.045-.805 2.495-1.213 4.326-1.213.9 0 1.798.102 2.686.318.697.17 1.304.374 1.798.612a.617.617 0 0 1 .337.657l-.27 1.87a.623.623 0 0 1-.865.488 8.393 8.393 0 0 0-1.303-.442 8.726 8.726 0 0 0-2.214-.306c-1.394 0-2.09.374-2.09 1.122 0 .42.168.76.505.997.338.238 1 .51 1.99.794 1.831.544 3.124 1.179 3.876 1.904.753.737 1.135 1.746 1.135 3.027 0 1.428-.561 2.539-1.674 3.355-1.135.805-2.675 1.213-4.641 1.213zM56.289 27.828a.826.826 0 0 1 .652-.318c.157 0 .292.034.438.114.18.102.326.25.404.43.068.16.113.318.113.5 0 .34-.113.6-.326.804a.895.895 0 0 1-.64.25.775.775 0 0 1-.641-.318v.102a.328.328 0 0 1-.023.136c-.022.023-.056.023-.134.023h-.236c-.068 0-.113-.012-.124-.023-.022-.023-.022-.057-.022-.136v-3.095c0-.068.01-.113.022-.136.022-.022.056-.022.124-.022h.236a.32.32 0 0 1 .134.022c.023.023.023.057.023.136v1.53zm.483.181a.533.533 0 0 0-.382.159.516.516 0 0 0-.157.385.542.542 0 0 0 .54.544c.145 0 .28-.056.381-.158a.524.524 0 0 0 .158-.397.562.562 0 0 0-.158-.386.506.506 0 0 0-.382-.147zM58.862 29.245l-.809-1.474a.562.562 0 0 1-.045-.102c0-.034.011-.057.034-.068a.298.298 0 0 1 .124-.023h.292c.056 0 .1 0 .112.012a.423.423 0 0 1 .068.09l.528 1.02.505-1.008c.023-.057.045-.091.057-.091.01-.011.056-.011.112-.011h.28c.057 0 .09 0 .113.011.034.011.045.045.045.08 0 .022-.011.056-.045.101l-1.416 2.732c-.022.057-.045.08-.067.09-.011.012-.056.012-.112.012h-.281c-.057 0-.09 0-.113-.011-.033-.012-.045-.046-.045-.08 0-.022.012-.056.045-.102l.618-1.178z\"\n}), React.createElement(\"path\", {\n  fillOpacity: .5,\n  d: \"M76.944 18.533c-.057-.113-.135-.227-.158-.351-.056-.295.191-.556.337-.794a11.732 11.732 0 0 0 1.135-2.494 11.92 11.92 0 0 0 .517-3.774c-.033-1.372-.28-2.743-.775-4.013A11.333 11.333 0 0 0 76.067 3.9a10.682 10.682 0 0 0-2.618-2.21 11.403 11.403 0 0 0-3.383-1.36A13.01 13.01 0 0 0 66.2.068c-1.314.102-2.618.42-3.82.963a11.504 11.504 0 0 0-3.237 2.21 11.196 11.196 0 0 0-2.292 3.209 11.64 11.64 0 0 0-1.057 3.831 12.794 12.794 0 0 0 .236 3.979c.281 1.27.787 2.493 1.484 3.593a10.734 10.734 0 0 0 2.55 2.788c.99.76 2.113 1.338 3.293 1.723.652.216 1.315.363 1.99.465.629.09 1.292.147 1.932.125a17.049 17.049 0 0 0 1.854-.16c.338-.056.675-.112 1-.203.282-.068.585-.125.697-.43.09-.25-.033-.454-.146-.67l-.404-.816-.742-1.496a.559.559 0 0 0-.326-.295c-.146-.045-.27-.011-.416.023a6.394 6.394 0 0 1-.494.09 7.722 7.722 0 0 1-2.045.012 7.49 7.49 0 0 1-3.551-1.485 7.525 7.525 0 0 1-2.338-3.026 7.554 7.554 0 0 1-.55-3.854 7.473 7.473 0 0 1 1.393-3.57 7.441 7.441 0 0 1 2.854-2.37 7.41 7.41 0 0 1 3.855-.691 7.407 7.407 0 0 1 3.36 1.156 7.647 7.647 0 0 1 2.281 2.3 7.725 7.725 0 0 1 1.169 3.64 7.514 7.514 0 0 1-.596 3.4 7.55 7.55 0 0 1-1.921 2.675c-.113.102-.236.193-.281.351a.54.54 0 0 0 .022.397l2.146 4.274c.113.215.214.544.439.68.157.09.36.068.528.068h3.281c.394-.012.674-.431.483-.794-.202-.397-.415-.793-.618-1.179l-1.27-2.448z\"\n}));\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    width: 79,\n    height: 31,\n    viewBox: \"0 0 79 31\"\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/logo.c061ba54.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M10.2 41.8c2 3.5 4.2 6.9 6.6 10.1H0v-3.5c3.3-2.3 6.7-4.5 10.2-6.6zM206.1 40.5c-4.6 3.4-8.8 7.2-12.6 11.4h-22.3c5.1-6.9 9.3-14.5 12.5-22.6 7.7 3.3 15.2 7 22.4 11.2z\",\n  fill: \"#3394D2\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M183.7 29.3c-3.2 8.1-7.4 15.7-12.5 22.6H16.7c-2.4-3.2-4.6-6.6-6.6-10.1C36.5 26 66.8 16.3 99.4 14.6a163.613 163.613 0 0 1 19.8 0c22.7 1.2 44.5 6.3 64.5 14.7z\",\n  fill: \"#4ebbc2\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M206.1 40.5c13-9.6 28.8-15.6 45.9-16.4v27.8h-28.6c-.3-.3-.7-.5-1-.8-.3-.2-.6-.5-.9-.7-.1 0-.1-.1-.2-.1-.3-.2-.6-.5-1-.7l-.9-.6c-.1-.1-.2-.2-.3-.2-.2-.2-.5-.3-.7-.5l-.9-.6c-.2-.1-.4-.3-.6-.4-.2-.2-.5-.3-.7-.5l-.9-.6-.9-.6s-.1-.1-.2-.1c-.4-.2-.7-.5-1.1-.7-.4-.2-.8-.5-1.1-.7s-.8-.5-1.2-.7c-.3-.2-.5-.3-.8-.5-1.4-.9-2.6-1.6-3.9-2.4z\",\n  fill: \"#e53b5b\"\n});\n\nvar _ref4 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M223.4 51.9h-29.9c3.8-4.2 8-8 12.6-11.4 1.3.8 2.6 1.5 3.8 2.3.3.2.5.3.8.5.4.2.8.5 1.2.7s.8.5 1.1.7c.4.2.7.5 1.1.7.1 0 .1.1.2.1l.9.6.9.6c.3.2.5.3.7.5.2.1.4.3.6.4l.9.6c.2.2.5.3.7.5.1.1.2.2.3.2l.9.6c.3.2.7.5 1 .7.1 0 .1.1.2.1.3.2.6.5.9.7.4.4.7.6 1.1.9z\",\n  fill: \"#6f559f\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    id: \"Calque_1\",\n    preserveAspectRatio: \"none\",\n    viewBox: \"0 0 252 52\"\n  }, props), _ref, _ref2, _ref3, _ref4);\n};\n\nexport default __webpack_public_path__ + \"static/media/background.0b1d9619.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"defs\", null, React.createElement(\"rect\", {\n  id: \"a\",\n  width: 120,\n  height: 120,\n  rx: 10\n}), React.createElement(\"path\", {\n  id: \"b\",\n  d: \"M78.667 60c0 1.4-.934 2.333-2.334 2.333h-14v14c0 1.4-.933 2.334-2.333 2.334-1.4 0-2.333-.934-2.333-2.334v-14h-14c-1.4 0-2.334-.933-2.334-2.333 0-1.4.934-2.333 2.334-2.333h14v-14c0-1.4.933-2.334 2.333-2.334 1.4 0 2.333.934 2.333 2.334v14h14c1.4 0 2.334.933 2.334 2.333z\"\n}));\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"g\", {\n  opacity: .5\n}, React.createElement(\"use\", {\n  fill: \"#1F2330\",\n  xlinkHref: \"#a\"\n}), React.createElement(\"rect\", {\n  width: 118,\n  height: 118,\n  x: 1,\n  y: 1,\n  stroke: \"#FFF\",\n  strokeWidth: 2,\n  rx: 10\n})), React.createElement(\"use\", {\n  fill: \"#FFF\",\n  fillRule: \"nonzero\",\n  opacity: .5,\n  xlinkHref: \"#b\"\n}));\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 120,\n    height: 120,\n    viewBox: \"0 0 120 120\"\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/plus-square.e518f822.svg\";\nexport { SvgComponent as ReactComponent };","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { signin, signup, fetchUsers } from '../../actions'\nimport { Redirect } from 'react-router-dom'\n\nimport styles from './Login.module.scss'\nimport { ReactComponent as Logo } from '../../assets/logo.svg'\nimport { ReactComponent as Background } from '../../assets/background.svg'\nimport { ReactComponent as PlusSquare } from '../../assets/plus-square.svg'\nimport { Avatar } from '../../components'\n\nimport { Signup } from '../../modals'\n\nclass Login extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      isSignupModalOpened: false,\n      isLoggedIn: false\n    }\n\n    this.handleSignup = this.handleSignup.bind(this)\n    this.handleClickNewUser = this.handleClickNewUser.bind(this)\n  }\n\n  componentDidMount () {\n    this.props.fetchUsers()\n  }\n\n  handleClickNewUser () {\n    this.setState({\n      isSignupModalOpened: !this.state.isSignupModalOpened\n    })\n  }\n\n  handleClose () {\n    this.setState({ isSignupModalOpened: false })\n  }\n\n  handleSignIn (user) {\n    this.props.signin(user)\n    this.setState({ isLoggedIn: true })\n  }\n\n  handleSignup (user) {\n    const { signup } = this.props\n    signup(user)\n    this.setState({ isSignupModalOpened: false })\n  }\n\n  render () {\n    const { users, user } = this.props\n    const { isSignupModalOpened } = this.state\n\n    if (user) return <Redirect to='/apps' />\n\n    return (\n      <div className={styles.Login}>\n        <Logo className={styles.Logo} />\n        <h1 className={styles.title}>Qui est-ce ?</h1>\n        <div className={styles.users}>\n          {users.map(user => (\n            <div key={user.username} className={styles.user} onClick={() => this.handleSignIn(user)}>\n              <Avatar {...user} />\n              <h2>{user.username}</h2>\n            </div>\n          ))}\n          <PlusSquare className={styles.PlusSquare} onClick={this.handleClickNewUser} />\n        </div>\n        <Background className={styles.Background} />\n        {isSignupModalOpened && <Signup onSignup={this.handleSignup} onClose={this.handleClickNewUser} />}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  user: state.masq.currentUser,\n  users: state.masq.users\n})\n\nconst mapDispatchToProps = dispatch => ({\n  signin: user => dispatch(signin(user)),\n  signup: user => dispatch(signup(user)),\n  fetchUsers: user => dispatch(fetchUsers(user))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Card } from 'qwant-research-components'\n\nimport { fetchApps } from '../../actions'\n\nimport styles from './Apps.module.scss'\n\n// const Actions = () => (\n//   <div style={{ display: 'flex', alignItems: 'center' }}>\n//     {/* <Switch color='#a3005c' label='Enabled' checked /> */}\n//     <div style={{ marginRight: 16 }} />\n//     <BurgerMenu>\n//       <Icon name='Trash' fill='#b2b2b2' />\n//     </BurgerMenu>\n//   </div>\n// )\n\nclass Apps extends PureComponent {\n  componentDidMount () {\n    if (!this.props.user) return\n    this.props.fetchApps()\n  }\n\n  render () {\n    const { apps, user } = this.props\n\n    if (!user) return <Redirect to='/' />\n    if (!apps) return false\n\n    return (\n      <div className={styles.Apps}>\n        <p className='title'>Mes Applications</p>\n        <p className='subtitle'>Retrouvez vos applications synchronises avec Masq</p>\n        {apps.map((app, index) => (\n          <div key={index} className={styles.Card}>\n            <Card minHeight={64} title={app.name} image={app.image} color='#a3005c' description={app.description} />\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  user: state.masq.currentUser,\n  apps: state.masq.apps\n})\n\nconst mapDispatchToProps = dispatch => ({\n  fetchApps: () => dispatch(fetchApps())\n})\n\nApps.propTypes = {\n  apps: PropTypes.array,\n  user: PropTypes.object,\n  fetchApps: PropTypes.func\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Apps)\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m37.2 0h-6.3c-.54 0-.9.36-.9.9v6.3c0 .54.36.9.9.9h6.3c.54 0 .9-.36.9-.9v-6.3c0-.54-.36-.9-.9-.9zm-.9 6.3h-4.5v-4.5h4.5zm10.8-6.3h-6.3c-.54 0-.9.36-.9.9v6.3c0 .54.36.9.9.9h6.3c.54 0 .9-.36.9-.9v-6.3c0-.54-.36-.9-.9-.9zm-.9 6.3h-4.5v-4.5h4.5zm.9 3.6h-6.3c-.54 0-.9.36-.9.9v6.3c0 .54.36.9.9.9h6.3c.54 0 .9-.36.9-.9v-6.3c0-.54-.36-.9-.9-.9zm-.9 6.3h-4.5v-4.5h4.5zm-9-6.3h-6.3c-.54 0-.9.36-.9.9v6.3c0 .54.36.9.9.9h6.3c.54 0 .9-.36.9-.9v-6.3c0-.54-.36-.9-.9-.9zm-.9 6.3h-4.5v-4.5h4.5z\",\n  transform: \"translate(-30)\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 18,\n    viewBox: \"0 0 18 18\",\n    width: 18\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/cards.ff3aa3d8.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m13 0h-10c-1.7 0-3 1.3-3 3v16c0 1.7 1.3 3 3 3h10c1.7 0 3-1.3 3-3v-16c0-1.7-1.3-3-3-3zm1 19c0 .6-.4 1-1 1h-10c-.6 0-1-.4-1-1v-16c0-.6.4-1 1-1h10c.6 0 1 .4 1 1zm-6-1c1.1045695 0 2-.8954305 2-2s-.8954305-2-2-2-2 .8954305-2 2 .8954305 2 2 2z\",\n  transform: \"\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 22,\n    viewBox: \"0 0 16 22\",\n    width: 16\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/phone.e486939a.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m12 8c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm8.3 1.4c.1-.2.3-.4.7-.4 1.7 0 3-1.3 3-3s-1.3-3-3-3h-.2c-.2 0-.4-.1-.5-.3 0-.1 0-.1-.1-.2-.1-.2-.1-.5.2-.8 1.2-1.2 1.2-3.1 0-4.2-.6-.6-1.3-.9-2.1-.9s-1.6.3-2.2.9c-.2.2-.5.2-.7.1-.2 0-.4-.3-.4-.6 0-1.7-1.3-3-3-3s-3 1.3-3 3v.2c0 .2-.1.4-.3.5-.1 0-.1 0-.2.1-.2.1-.5 0-.8-.2-1.2-1.2-3.1-1.2-4.2 0-1.2 1.2-1.2 3.1.1 4.3.2.2.2.5.1.8-.1.2-.4.4-.7.4-1.7 0-3 1.3-3 3s1.3 3 3 3h.2c.3 0 .5.2.6.4s.1.5-.2.8c-.6.6-.9 1.3-.9 2.1s.3 1.5.9 2.1c1.2 1.2 3.1 1.2 4.3-.1.2-.2.5-.2.8-.1s.4.3.4.7c0 1.7 1.3 3 3 3s3-1.3 3-3v-.2c0-.3.2-.5.4-.6s.5-.1.8.2c1.2 1.2 3.1 1.2 4.2 0 1.2-1.2 1.2-3.1-.1-4.3-.1-.2-.2-.5-.1-.7zm-1.8-.8c-.4 1-.2 2.1.6 3 .2.2.3.4.3.7s-.1.5-.3.7-.4.3-.7.3c-.3 0-.5-.1-.8-.4-.8-.8-1.9-1-2.9-.5-1 .4-1.6 1.4-1.6 2.4v.2c0 .6-.4 1-1 1s-1-.4-1-1v-.1c0-1.1-.7-2-1.7-2.4-.3-.2-.7-.2-1.1-.2-.7 0-1.4.3-1.9.8-.4.4-1 .4-1.4 0-.2-.2-.3-.4-.3-.7s.1-.5.4-.8c.8-.8 1-1.9.5-2.9-.4-1-1.4-1.6-2.4-1.6h-.2c-.6 0-1-.4-1-1s.4-1 1-1h.1c1.1 0 2-.7 2.4-1.7s.2-2.1-.6-3c-.4-.4-.4-1 0-1.4s1-.4 1.5.1c.7.7 1.8.9 2.7.6.1 0 .2 0 .3-.1 1-.4 1.6-1.4 1.6-2.4v-.2c0-.6.4-1 1-1s1 .4 1 1.1c0 1.1.6 2 1.6 2.4s2.1.2 3-.6c.2-.2.4-.3.7-.3s.5.1.7.3c.4.4.4 1-.1 1.5-.7.7-.9 1.8-.6 2.7 0 .1 0 .2.1.3.4 1 1.4 1.6 2.4 1.6h.2c.6 0 1 .4 1 1s-.4 1-1.1 1c-1 0-2 .6-2.4 1.6z\",\n  transform: \"\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    width: 24\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/settings.14755d32.svg\";\nexport { SvgComponent as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"m9.01126408 21c0 .6-.40050063 1-1.00125156 1h-5.00625783c-1.70212766 0-3.00375469-1.3-3.00375469-3v-16c0-1.7 1.30162703-3 3.00375469-3h5.00625783c.60075093 0 1.00125156.4 1.00125156 1s-.40050063 1-1.00125156 1h-5.00625783c-.60075094 0-1.00125156.4-1.00125156 1v16c0 .6.40050062 1 1.00125156 1h5.00625783c.60075093 0 1.00125156.4 1.00125156 1zm10.91364202-9.6c.1001252-.2.1001252-.5 0-.8-.1001251-.1-.1001251-.2-.2002503-.3l-4.0050062-4c-.4005007-.4-1.0012516-.4-1.4017522 0-.4005007.4-.4005007 1 0 1.4l2.3028786 2.3h-9.61201505c-.60075094 0-1.00125156.4-1.00125156 1s.40050062 1 1.00125156 1h9.61201505l-2.3028786 2.3c-.4005007.4-.4005007 1 0 1.4.2002503.2.5006258.3.7008761.3s.5006257-.1.7008761-.3l4.0050062-4c.1001252-.1.2002503-.2.2002503-.3z\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    height: 22,\n    viewBox: \"0 0 20 22\",\n    width: 20\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/logout.d4c1276a.svg\";\nexport { SvgComponent as ReactComponent };","import React from 'react'\nimport { Sidebar } from 'qwant-research-components'\nimport { Avatar } from '../../components'\nimport { connect } from 'react-redux'\nimport { Redirect, NavLink } from 'react-router-dom'\n\nimport { signout } from '../../actions'\n\nimport styles from './Sidebar.module.scss'\nimport { ReactComponent as AppsIcon } from '../../assets/cards.svg'\nimport { ReactComponent as PhoneIcon } from '../../assets/phone.svg'\nimport { ReactComponent as SettingsIcon } from '../../assets/settings.svg'\nimport { ReactComponent as LogoutIcon } from '../../assets/logout.svg'\n\nclass SidebarApp extends React.Component {\n  render () {\n    const { user, signout } = this.props\n\n    if (!user) return <Redirect to='/' />\n\n    return (\n      <Sidebar>\n        <div className={styles.header}>\n          <Avatar {...user} size={64} />\n          <h2>{user.username}</h2>\n        </div>\n        <div className={styles.nav}>\n          <NavLink to='/apps' className={styles.navElement} activeClassName={styles.active}>\n            <AppsIcon fill='white' opacity={0.8} width={24} />\n            <p className='label'>Applications</p>\n          </NavLink>\n          <NavLink to='/devices' className={styles.navElement} activeClassName={styles.active}>\n            <PhoneIcon fill='white' opacity={0.8} width={24} />\n            <p className='label'>Appareils</p>\n          </NavLink>\n          <NavLink to='/settings' className={styles.navElement} activeClassName={styles.active}>\n            <SettingsIcon fill='white' opacity={0.8} width={24} />\n            <p className='label'>Paramtres</p>\n          </NavLink>\n        </div>\n        <div className={styles.logout} onClick={signout}>\n          <div className={styles.navElement}>\n            <LogoutIcon fill='white' opacity={0.8} width={24} />\n            <p className='label'>Dconnexion</p>\n          </div>\n        </div>\n      </Sidebar>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.masq.currentUser\n})\n\nconst mapDispatchToProps = dispatch => ({\n  signout: () => dispatch(signout())\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarApp)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Button, TextField } from 'qwant-research-components'\n\nimport { updateUser } from '../../actions'\nimport { Avatar } from '../../components'\n\nimport styles from './Settings.module.scss'\n\nclass Settings extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      image: '',\n      lastname: '',\n      firstname: '',\n      username: ''\n    }\n\n    this.hasChanged = false\n    this.validate = this.validate.bind(this)\n    this.isValid = this.isValid.bind(this)\n    this.handleKeyUp = this.handleKeyUp.bind(this)\n  }\n\n  componentDidMount () {\n    const { user } = this.props\n    if (!user) return\n\n    this.setState({\n      image: user.image,\n      lastname: user.lastname,\n      firstname: user.firstname,\n      username: user.username\n    })\n  }\n\n  isValid (fieldName) {\n    if (fieldName === 'image') return true\n    return this.state[fieldName].length > 0\n  }\n\n  onChange (field, event) {\n    const value = event.target.value.trim()\n    this.hasChanged = true\n    this.setState({\n      [field]: value\n    })\n  }\n\n  onImageChange (event) {\n    const reader = new window.FileReader()\n    const file = event.target.files[0]\n    if (!file) {\n      return\n    }\n\n    reader.addEventListener('load', () => {\n      this.hasChanged = true\n      this.setState({ image: reader.result })\n    })\n    reader.readAsDataURL(file)\n  }\n\n  validate () {\n    if (!this.hasChanged) {\n      return\n    }\n\n    // Every fields should be valid\n    const isValid = Object.keys(this.state).every(key => this.isValid(key))\n    // If invalid, return\n    if (!isValid) {\n      // forceUpdate to show errors\n      return this.forceUpdate()\n    }\n\n    this.props.updateUser(this.props.user.id, this.state)\n    this.hasChanged = false\n  }\n\n  handleKeyUp (e) {\n    if (e.key === 'Enter') {\n      this.validate()\n    }\n  }\n\n  render () {\n    if (!this.props.user) return <Redirect to='/' />\n\n    return (\n      <div className={styles.Settings}>\n        <div>\n          <div className={styles.titleContainer}>\n            <p className='title'>Vos paramtres d'utilisateur</p>\n            <p className='subtitle'>Changez vos informations personnelles</p>\n          </div>\n\n          <div className={styles.profile}>\n            <Avatar upload size={192} image={this.state.image} onChange={(e) => this.onImageChange(e)} />\n            <div className={styles.inputs}>\n              <TextField\n                label={'Nom'}\n                error={!this.isValid('lastname')}\n                onKeyUp={this.handleKeyUp}\n                defaultValue={this.state.lastname} onChange={(e) => this.onChange('lastname', e)}\n              />\n              <TextField\n                label={'Prnom'}\n                error={!this.isValid('firstname')}\n                onKeyUp={this.handleKeyUp}\n                defaultValue={this.state.firstname} onChange={(e) => this.onChange('firstname', e)}\n              />\n              <TextField\n                label={'Pseudo (affich)'}\n                error={!this.isValid('username')}\n                onKeyUp={this.handleKeyUp}\n                defaultValue={this.state.username} onChange={(e) => this.onChange('username', e)}\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className={styles.sidebar}>\n          <Button width={200} secondary={!this.hasChanged} label='SAUVEGARDER' onClick={this.validate} />\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  user: state.masq.currentUser\n})\n\nconst mapDispatchToProps = dispatch => ({\n  updateUser: (id, user) => dispatch(updateUser(id, user))\n})\n\nSettings.propTypes = {\n  user: PropTypes.object,\n  updateUser: PropTypes.func\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Settings)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\nimport { Card } from 'qwant-research-components'\n\nimport styles from './Devices.module.scss'\n\nconst Devices = ({ user, devices }) => {\n  if (!user) return <Redirect to='/' />\n\n  return (\n    <div className={styles.Devices}>\n      <p className='title'>Mes Appareils</p>\n      <p className='subtitle'>Retrouvez la liste de vos appareils connects  Masq</p>\n      {devices.map((device, index) => (\n        <div key={index} className={styles.Card}>\n          <Card minHeight={64} title={device.name} color={device.color} description={device.description} />\n        </div>\n      ))}\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.masq.currentUser,\n  devices: state.masq.devices\n})\n\nDevices.propTypes = {\n  user: PropTypes.object,\n  devices: PropTypes.arrayOf(PropTypes.object)\n}\n\nexport default connect(mapStateToProps)(Devices)\n","export { default as Login } from './Login'\nexport { default as Apps } from './Apps'\nexport { default as Sidebar } from './Sidebar'\nexport { default as Settings } from './Settings'\nexport { default as Devices } from './Devices'\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"AuthApp\":\"AuthApp_AuthApp__2znKd\",\"title\":\"AuthApp_title__3fm6b\",\"appTitle\":\"AuthApp_appTitle__1hdWP\",\"description\":\"AuthApp_description__iwDDs\",\"buttons\":\"AuthApp_buttons__2kMVu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Settings\":\"Settings_Settings__2bGKW\",\"titleContainer\":\"Settings_titleContainer__Q_pGq\",\"profile\":\"Settings_profile__1Xw8B\",\"inputs\":\"Settings_inputs__1NjVV\",\"fields\":\"Settings_fields__3aGf-\",\"TextInput\":\"Settings_TextInput__4_v0n\",\"button-container\":\"Settings_button-container__2o5Y6\",\"parameters\":\"Settings_parameters__3pUx0\",\"sidebar\":\"Settings_sidebar__1TH_C\",\"appSettings\":\"Settings_appSettings__2fdbG\",\"buttons\":\"Settings_buttons__27ct6\",\"exportButton\":\"Settings_exportButton__3VNoZ\"};","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Button, TextField } from 'qwant-research-components'\n\nimport { Avatar, Modal } from '../../components'\n\nimport styles from './Signup.module.scss'\n\nclass Signup extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      image: '',\n      lastname: '',\n      firstname: '',\n      username: '',\n      password: '',\n      passwordConfirmation: ''\n    }\n\n    this.currentStep = 0\n    this.validationEnabled = false\n    this.refAvatar = React.createRef()\n\n    this.next = this.next.bind(this)\n    this.finish = this.finish.bind(this)\n    this.isValid = this.isValid.bind(this)\n    this.previous = this.previous.bind(this)\n    this.openDialog = this.openDialog.bind(this)\n    this.handleKeyUp = this.handleKeyUp.bind(this)\n  }\n\n  isValid (fieldName) {\n    if (!this.validationEnabled) {\n      // Don't show error as long as the user does not click Finish btn\n      return true\n    }\n\n    if (fieldName === 'image') return true\n    if (fieldName === 'password') {\n      return this.state[fieldName].length >= 8\n    }\n    if (fieldName === 'passwordConfirmation') {\n      return this.state[fieldName] === this.state.password\n    }\n\n    return this.state[fieldName].length > 0\n  }\n\n  onChange (field, event) {\n    const value = event.target.value.trim()\n    this.setState({\n      [field]: value\n    })\n  }\n\n  onImageChange (event) {\n    const reader = new window.FileReader()\n    const file = event.target.files[0]\n    if (!file) {\n      return\n    }\n\n    reader.addEventListener('load', () => {\n      this.setState({ image: reader.result })\n    })\n    reader.readAsDataURL(file)\n  }\n\n  openDialog () {\n    this.refAvatar.current.openDialog()\n  }\n\n  next () {\n    const fieldsToValidate = ['lastname', 'firstname', 'username']\n    this.validationEnabled = true\n\n    const isValid = fieldsToValidate.every(key => this.isValid(key))\n\n    // If invalid, return\n    if (!isValid) {\n      // forceUpdate to show errors\n      return this.forceUpdate()\n    }\n\n    this.validationEnabled = false // do not display error on the next step for now\n    this.currentStep++\n    this.forceUpdate()\n  }\n\n  previous () {\n    this.currentStep--\n    this.forceUpdate()\n  }\n\n  finish () {\n    const { onSignup } = this.props\n    this.validationEnabled = true\n\n    if (!this.isValid('password')) {\n      // forceUpdate to show errors\n      return this.forceUpdate()\n    }\n\n    onSignup(this.state)\n  }\n\n  handleKeyUp (e) {\n    if (e.key !== 'Enter') {\n      return\n    }\n\n    if (this.currentStep === 0) {\n      this.next()\n    } else {\n      this.finish()\n    }\n  }\n\n  render () {\n    return (\n      <Modal onClose={this.props.onClose} height={650} width={511}>\n        <div className={styles.Signup}>\n          <span className={styles.title}>Ajouter un nouvel utilisateur</span>\n\n          {this.currentStep === 0 && (\n            <React.Fragment>\n              <Avatar\n                size={120}\n                upload\n                ref={this.refAvatar}\n                onChange={(e) => this.onImageChange(e)}\n                image={this.state.image || null}\n              />\n\n              <div style={{ paddingTop: 24 }} />\n              <Button secondary label='Importer une photo' onClick={this.openDialog} />\n              <div style={{ paddingBottom: 32 }} />\n\n              <TextField\n                className={styles.TextField}\n                defaultValue={this.state.lastname}\n                label='Nom'\n                error={!this.isValid('lastname')}\n                onChange={(e) => this.onChange('lastname', e)}\n              />\n              <TextField\n                className={styles.TextField}\n                defaultValue={this.state.firstname}\n                label='Prnom'\n                error={!this.isValid('firstname')}\n                onChange={(e) => this.onChange('firstname', e)}\n              />\n              <TextField\n                className={styles.TextField}\n                defaultValue={this.state.username}\n                label='Pseudo (affich)'\n                error={!this.isValid('username')}\n                onChange={(e) => this.onChange('username', e)}\n                onKeyUp={this.handleKeyUp}\n              />\n\n              <div className={styles.buttons}>\n                <Button label='Suivant' onClick={this.next} width={185} />\n              </div>\n            </React.Fragment>\n          )}\n\n          {this.currentStep === 1 && (\n            <React.Fragment>\n              <Avatar\n                size={120}\n                image={this.state.image}\n                username={this.state.username}\n                firstname={this.state.firstname}\n                lastname={this.state.lastname}\n              />\n              <p className={styles.user}>{this.state.username}</p>\n              <TextField\n                className={styles.TextField}\n                autoFocus\n                type='password'\n                label={this.isValid('password')\n                  ? 'Mot de passe'\n                  : 'Le mot de passe doit tre compos d\\'au moins 8 caractres.'}\n                error={!this.isValid('password')}\n                onChange={(e) => this.onChange('password', e)}\n              />\n\n              <TextField\n                className={styles.TextField}\n                type='password'\n                label={this.isValid('passwordConfirmation')\n                  ? 'Mot de passe (confirmation)'\n                  : 'Les mots de passe ne correspondent pas.'}\n                error={!this.isValid('passwordConfirmation')}\n                onKeyUp={this.handleKeyUp}\n                onChange={(e) => this.onChange('passwordConfirmation', e)}\n              />\n\n              <div className={styles.buttons}>\n                <Button label='Prcdent' onClick={this.previous} width={185} />\n                <Button label='Terminer' onClick={this.finish} width={185} />\n              </div>\n            </React.Fragment>\n          )}\n        </div>\n      </Modal>\n    )\n  }\n}\n\nSignup.propTypes = {\n  onSignup: PropTypes.func,\n  onClose: PropTypes.func\n}\n\nexport default Signup\n","import React, { Fragment } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { Button, Loader } from 'qwant-research-components'\n\nimport { Modal } from '../../components'\nimport { handleUserAppLogin, handleUserAppRegister, setCurrentAppRequest, fetchApps } from '../../actions'\n\nimport styles from './AuthApp.module.scss'\n\nclass AuthApp extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      loading: true\n    }\n    this.handleOk = this.handleOk.bind(this)\n    this.handleRefuse = this.handleRefuse.bind(this)\n    this.handleAccept = this.handleAccept.bind(this)\n  }\n\n  async componentDidMount () {\n    const { channel, key, appId } = this.props.appRequest\n    await this.props.handleUserAppLogin(channel, key, appId)\n    this.setState({ loading: false })\n  }\n\n  async handleRefuse () {\n    await this.props.handleUserAppRegister(false)\n    await this.props.setCurrentAppRequest(null)\n    this.props.onClose()\n  }\n\n  async handleAccept () {\n    this.setState({ loading: true }, async () => {\n      await this.props.handleUserAppRegister(true)\n      this.setState({ loading: false })\n      await this.props.fetchApps() // The apps may be added\n    })\n  }\n\n  async handleOk () {\n    // remove the app request\n    await this.props.setCurrentAppRequest(null)\n  }\n\n  renderButtons () {\n    const { loading } = this.state\n    const { appRequest } = this.props\n\n    if (loading) return <Loader />\n\n    if (appRequest.isConnected === false) {\n      return (\n        <Fragment>\n          <Button label={'Refuser'} onClick={this.handleRefuse} color='#e53b5b' />\n          <Button label={'Valider'} onClick={this.handleAccept} color='#40ae6c' />\n        </Fragment>\n      )\n    }\n\n    if (appRequest.isConnected) {\n      return <Button label={'OK'} onClick={this.handleOk} color='#40ae6c' />\n    }\n  }\n\n  render () {\n    const { appRequest, onClose } = this.props\n\n    return (\n      <Modal width={511} height={400} onClose={onClose}>\n        <div className={styles.AuthApp}>\n          <p className={styles.title}>Nouvelle requte de connexion de:</p>\n          <p className={styles.appTitle}>{appRequest.appId}</p>\n          <p className={styles.description}>\n          Cette notification apparait car cette application demande un accs  votre stockage Masq.\n          </p>\n          <p className={styles.description}>\n          Si vous ntes pas  lorigine de cette demande, veuillez refuser cette requte.\n          </p>\n\n          <div className={styles.buttons}>\n            {this.renderButtons()}\n          </div>\n        </div>\n      </Modal>\n    )\n  }\n}\n\nAuthApp.propTypes = {\n  handleUserAppRegister: PropTypes.func.isRequired,\n  handleUserAppLogin: PropTypes.func.isRequired,\n  setCurrentAppRequest: PropTypes.func.isRequired,\n  fetchApps: PropTypes.func.isRequired,\n  appRequest: PropTypes.object.isRequired,\n  onClose: PropTypes.func\n}\n\nconst mapStateToProps = state => ({\n  currentUser: state.masq.currentUser\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  handleUserAppLogin: (channel, key, appId) => dispatch(handleUserAppLogin(channel, key, appId)),\n  handleUserAppRegister: (isAccepted) => dispatch(handleUserAppRegister(isAccepted)),\n  setCurrentAppRequest: (app) => dispatch(setCurrentAppRequest(app)),\n  fetchApps: () => dispatch(fetchApps())\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AuthApp)\n","export { default as Signup } from './Signup/Signup'\nexport { default as AuthApp } from './AuthApp/AuthApp'\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Apps\":\"Apps_Apps__2G1xS\",\"Card\":\"Apps_Card__1FgkF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Devices\":\"Devices_Devices__3xseY\",\"Card\":\"Devices_Card__2NXMk\"};","import rai from 'random-access-idb'\nimport signalhub from 'signalhubws'\nimport hyperdb from 'hyperdb'\nimport swarm from 'webrtc-swarm'\nimport pump from 'pump'\nimport uuidv4 from 'uuid/v4'\nimport { promisifyAll } from 'bluebird'\n\nimport { dbReady, encryptMessage, decryptMessage, importKey } from './utils'\n\nconst HUB_URLS = process.env.REACT_APP_SIGNALHUB_URLS.split(',')\n\nconst swarmOpts = process.env.NODE_ENV === 'test'\n  ? { wrtc: require('wrtc') }\n  : {}\n\n/**\n * Open or create a hyperdb instance\n * @param {string} name The indexeddb store name\n */\nconst openOrCreateDB = (name) => {\n  return promisifyAll(hyperdb(rai(name), {\n    valueEncoding: 'json',\n    firstNode: true\n  }))\n}\n\nclass Masq {\n  constructor () {\n    this.profileId = null\n    this.profileDB = null\n\n    this.appsDBs = {}\n    this.swarms = {}\n    this.hubs = {}\n\n    this.sw = null // sw used during login and registration\n    this.hub = null\n    this.key = null\n    this.peer = null\n    this.app = null\n  }\n\n  /**\n   * Open and replicate a profile database\n   */\n  async openProfile (profileId) {\n    if (!profileId) throw Error('Missing profileId')\n\n    this.closeProfile()\n\n    this.profileId = profileId\n    this.profileDB = openOrCreateDB(profileId)\n    this.profileDB.on('ready', () => this._startReplicate(this.profileDB))\n\n    const apps = await this.getApps()\n    apps.forEach(app => {\n      const dbName = profileId + '-' + app.appId\n      const db = openOrCreateDB(dbName)\n      this.appsDBs[dbName] = db\n      db.on('ready', () => this._startReplicate(db))\n    })\n\n    const profile = (await this.profileDB.getAsync('/')).value\n    return profile\n  }\n\n  async closeProfile () {\n    this._stopAllReplicates()\n    this.profileDB = null\n    this.profileId = null\n    this.appsDBs = {}\n  }\n\n  /**\n   * Create a new profile DB\n   * @param {object} profile The new profile to add\n   */\n  async addProfile (profile) {\n    // TODO: Check profile properties\n    const id = uuidv4()\n    profile.id = id\n\n    // Create a DB for this profile\n    const db = openOrCreateDB(id)\n    await dbReady(db)\n    await db.putAsync('/', profile)\n\n    this._setProfileToLocalStorage(profile)\n  }\n\n  /**\n   * Get public profiles from localstorage (id, username, and )\n   */\n  async getProfiles () {\n    return this._getProfilesFromLocalStorage()\n  }\n\n  /**\n   * Update an existing profile\n   * @param {object} profile The updated profile\n   */\n  async updateProfile (profile) {\n    // TODO: Check profile\n    this._checkProfile()\n    const id = profile.id\n    if (!id) throw Error('Missing id')\n    await this.profileDB.putAsync('/', profile)\n    this._setProfileToLocalStorage(profile)\n  }\n\n  /**\n   * Add an app to a specified profile\n   * @param {object} app The app\n   */\n  addApp (app) {\n    return this._createResource('apps', app)\n  }\n\n  /**\n   * Add a device to a specified profile\n   * @param {object} device The device\n   */\n  addDevice (device) {\n    return this._createResource('devices', device)\n  }\n\n  /**\n   * Get all apps of the current profile\n   */\n  getApps () {\n    this._checkProfile()\n    return this._getResources('apps')\n  }\n\n  /**\n   * Get all devices of the current profile\n   */\n  getDevices () {\n    this._checkProfile()\n    return this._getResources('devices')\n  }\n\n  /**\n   * Update an app\n   * @param {object} app The updated app\n   */\n  updateApp (app) {\n    this._checkProfile()\n    return this._updateResource('apps', app)\n  }\n\n  /**\n   * Update a device\n   * @param {object} device The updated device\n   */\n  async updateDevice (device) {\n    this._updateResource('devices', device)\n  }\n\n  /**\n   * Connect to a user-app channel and answer if\n   * the user-app is authorized or not.\n   * This method should be called only once the user is logged in\n   * @param {string} channel The channel to connect\n   * @param {string} rawKey The encryption key, base64 encoded\n   * @param {string} appId The app id (url for instance)\n   */\n  async handleUserAppLogin (channel, rawKey, appId) {\n    return new Promise(async (resolve, reject) => {\n      this.appId = appId\n      this._checkProfile()\n      this.key = await importKey(Buffer.from(rawKey, 'base64'))\n\n      const sendAuthorized = async (peer, id) => {\n        const data = { msg: 'authorized', id }\n        const msg = await encryptMessage(this.key, data)\n        peer.send(msg)\n      }\n\n      const sendNotAuthorized = async (peer) => {\n        const data = { msg: 'notAuthorized' }\n        const msg = await encryptMessage(this.key, data)\n        peer.send(msg)\n      }\n\n      this.hub = signalhub(channel, HUB_URLS)\n      this.sw = swarm(this.hub, swarmOpts)\n\n      this.sw.on('disconnect', () => {\n        this._closeUserAppConnection()\n        return resolve(true)\n      })\n\n      this.sw.on('peer', async (peer) => {\n        this.peer = peer\n        const apps = await this.getApps()\n        const app = apps.find(app => app.appId === appId)\n        if (app) {\n          sendAuthorized(peer, app.id)\n        } else {\n          sendNotAuthorized(peer)\n        }\n\n        peer.once('data', async (data) => {\n          const json = await decryptMessage(this.key, data)\n          if (json.msg === 'registerUserApp') {\n            const { name, description, imageURL } = json\n            this.app = { name, description, imageURL }\n            resolve(false)\n          } else {\n            reject(new Error('Invalid data'))\n          }\n        })\n      })\n    })\n  }\n\n  /**\n   * Exchange messages with a user-app to register it.\n   * It will create a new hyperdb with a given id.\n   * Then, the user-app send its local key to authorize.\n   * This method should be called only once the user is logged in\n   * @param {string} channel The channel to connect\n   * @param {string} rawKey The encryption key, base64 encoded\n   * @param {string} appId The app id (url for instance)\n   */\n  async handleUserAppRegister (isGranted) {\n    return new Promise(async (resolve, reject) => {\n      this._checkProfile()\n\n      let dbName = ''\n\n      const sendAccessRefused = async (peer) => {\n        const data = { msg: 'masqAccessRefused' }\n        const msg = await encryptMessage(this.key, data)\n        peer.send(msg)\n      }\n\n      const sendAccessGranted = async (peer, dbKey, id) => {\n        const data = { msg: 'masqAccessGranted', key: dbKey, id: id }\n        const msg = await encryptMessage(this.key, data)\n        peer.send(msg)\n      }\n\n      const sendWriteAccessGranted = async (peer) => {\n        const data = { msg: 'writeAccessGranted' }\n        const msg = await encryptMessage(this.key, data)\n        peer.send(msg)\n      }\n\n      const handleData = async (peer, data) => {\n        const json = await decryptMessage(this.key, data)\n        const { msg } = json\n        // TODO: Error if  missing params\n\n        if (msg === 'requestWriteAccess') {\n          const userAppKey = Buffer.from(json.key, 'hex')\n          this.appsDBs[dbName].authorize(userAppKey, (err) => {\n            if (err) throw err\n            sendWriteAccessGranted(peer)\n            this.sw.close()\n            return resolve()\n          })\n        }\n      }\n\n      if (!isGranted) {\n        sendAccessRefused(this.peer)\n        this.sw.close()\n        return resolve()\n      }\n\n      const apps = await this.getApps()\n      const app = apps.find(app => app.appId === this.appId)\n      const id = app ? app.id : await this.addApp({\n        ...this.app, appId: this.appId\n      })\n\n      dbName = this.profileId + '-' + id\n      const db = openOrCreateDB(dbName)\n      this.appsDBs[dbName] = db\n      db.on('ready', () => {\n        this._startReplicate(db)\n        sendAccessGranted(this.peer, db.key.toString('hex'), id)\n      })\n\n      this.peer.on('data', (data) => handleData(this.peer, data))\n    })\n  }\n\n  /**\n   * Private methods\n   */\n\n  async _createResource (name, res) {\n    this._checkProfile()\n    const node = await this.profileDB.getAsync(`/${name}`)\n    const ids = node ? node.value : []\n    const id = uuidv4()\n    res['id'] = id\n\n    const batch = [{\n      type: 'put',\n      key: `/${name}`,\n      value: [...ids, id]\n    }, {\n      type: 'put',\n      key: `/${name}/${id}`,\n      value: res\n    }]\n\n    await this.profileDB.batchAsync(batch)\n    return id\n  }\n\n  async _getResources (name) {\n    const node = await this.profileDB.getAsync(`/${name}`)\n    if (!node) return []\n\n    const ids = node.value\n    const resourcePromises = ids.map(\n      id => this.profileDB.getAsync(`/${name}/${id}`)\n    )\n    const resourceNodes = await Promise.all(resourcePromises)\n    const resources = resourceNodes.map(n => n.value)\n    return resources\n  }\n\n  async _updateResource (name, res) {\n    const id = res.id\n    if (!id) throw Error('Missing id')\n    return this.profileDB.putAsync(`/${name}/${id}`, res)\n  }\n\n  _setProfileToLocalStorage (profile) {\n    const id = profile.id\n    if (!id) throw Error('missing id')\n\n    window.localStorage.setItem(id, JSON.stringify({\n      id: id,\n      username: profile.username,\n      image: profile.image\n    }))\n  }\n\n  _getProfilesFromLocalStorage () {\n    const ids = Object.keys(window.localStorage)\n    if (!ids) return []\n\n    const profiles = ids.map(id =>\n      JSON.parse(window.localStorage.getItem(id))\n    )\n\n    return profiles\n  }\n\n  /**\n   * Replicate a database in a swarm using\n   * db.discoveryKey as channel name\n   */\n  _startReplicate (db) {\n    const discoveryKey = db.discoveryKey.toString('hex')\n    this.hubs[discoveryKey] = signalhub(discoveryKey, HUB_URLS)\n    this.swarms[discoveryKey] = swarm(this.hubs[discoveryKey], swarmOpts)\n    this.swarms[discoveryKey].on('peer', peer => {\n      const stream = db.replicate({ live: true })\n      pump(peer, stream, peer)\n    })\n  }\n\n  _stopAllReplicates () {\n    Object.values(this.swarms).forEach(sw => sw.close())\n    this.swarms = {}\n    this.hubs = {}\n  }\n\n  _checkProfile () {\n    if (!this.profileDB) throw Error('Open a profile first')\n  }\n\n  _closeUserAppConnection () {\n    this.sw.on('close', () => {\n      this.hub = null\n      this.peer = null\n      this.app = null\n      // FIXME: do not clear this.key , as messages could\n      // could still be sending while the connection is closing\n    })\n    this.sw.close()\n  }\n}\n\nexport default Masq\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { HashRouter as Router, Route } from 'react-router-dom'\n\nimport { Login, Apps, Devices, Settings, Sidebar } from './containers'\nimport { addDevice, setCurrentAppRequest } from './actions'\nimport { AuthApp } from './modals'\n\nconst authenticatedRoutes = [\n  {\n    path: '/apps',\n    sidebar: Sidebar,\n    main: Apps\n  },\n  {\n    path: '/devices',\n    sidebar: Sidebar,\n    main: Devices\n  },\n  {\n    path: '/settings',\n    sidebar: Sidebar,\n    main: Settings\n  }\n]\n\nclass App extends Component {\n  constructor () {\n    super()\n\n    this.dbMasqPrivate = null\n    this.dbMasqPublic = null\n    this.dbs = {} // all replicated dbs\n    this.sw = null\n\n    this.state = {\n      messages: [],\n      hash: null\n    }\n\n    this.handleInput = this.handleInput.bind(this)\n  }\n\n  async componentDidMount () {\n    if (!this.props.devices.length) {\n      const { name, os } = require('detect-browser').detect()\n      this.props.addDevice({\n        name: `${name} sur ${os}`,\n        description: 'Cet appareil',\n        color: '#40ae6c'\n      })\n    }\n\n    const hash = window.location.hash.substr(2) // ignore #/ characters\n    if (!hash.length) return\n\n    const decoded = Buffer.from(hash, 'base64')\n    try {\n      const [ appId, msg, channel, key ] = JSON.parse(decoded) // eslint-disable-line\n      this.props.setCurrentAppRequest({ appId, channel, key })\n    } catch (e) {\n      // Incorrect urls parameters\n    }\n  }\n\n  appendMessage (msg) {\n    this.setState({ messages: [...this.state.messages, msg] })\n  }\n\n  handleInput (e) {\n    this.setState({ input: e.target.value })\n  }\n\n  render () {\n    const { currentUser, currentAppRequest } = this.props\n    return (\n      <Router>\n        <div>\n          {currentUser && currentAppRequest &&\n            <AuthApp\n              onClose={() => this.props.setCurrentAppRequest(null)}\n              appRequest={currentAppRequest}\n            />\n          }\n          <Route path='/' component={Login} />\n\n          {/* <Route path='/registerapp/:channel/:challenge/:app' component={AuthApp} /> */}\n\n          <div style={{ display: 'flex' }}>\n            {authenticatedRoutes.map((route, index) => (\n              <Route\n                key={index}\n                path={route.path}\n                component={route.sidebar}\n              />\n            ))}\n\n            {authenticatedRoutes.map((route, index) => (\n              <Route\n                key={index}\n                path={route.path}\n                component={route.main}\n              />\n            ))}\n          </div>\n        </div>\n      </Router>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  currentAppRequest: state.masq.currentAppRequest,\n  currentUser: state.masq.currentUser,\n  devices: state.masq.devices,\n  users: state.masq.users\n})\n\nconst mapDispatchToProps = dispatch => ({\n  addDevice: device => dispatch(addDevice(device)),\n  setCurrentAppRequest: app => dispatch(setCurrentAppRequest(app))\n})\n\nApp.propTypes = {\n  currentUser: PropTypes.object,\n  currentAppRequest: PropTypes.object,\n  setCurrentAppRequest: PropTypes.func,\n  addDevice: PropTypes.func,\n  devices: PropTypes.arrayOf(PropTypes.object)\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n"],"sourceRoot":""}